<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Oracle 数据库速查知识文档 | 传礼</title><meta name="keywords" content="博客,blog,王传礼,java,python,大数据"><meta name="author" content="传礼,978252321@qq.com"><meta name="copyright" content="传礼"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Oracle数据库速查知识文档项目介绍该项目记录了Oracle相关的速查知识汇总，主要涉及了oracle基础使用、SQL基础、oracle函数、oracle触发器、oracle高级查询、PL&#x2F;SQL编程基础、PL&#x2F;SQL存储过程等。若有新增，还将不断添加中。 SQL基础部分1.简介Oracle Database，又名Oracle RDBMS，或简称Oracle，是甲骨文公司的一款关系数据库管理系统">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle 数据库速查知识文档">
<meta property="og:url" content="https://iwangchuanli.github.io/posts/43893.html">
<meta property="og:site_name" content="传礼">
<meta property="og:description" content="Oracle数据库速查知识文档项目介绍该项目记录了Oracle相关的速查知识汇总，主要涉及了oracle基础使用、SQL基础、oracle函数、oracle触发器、oracle高级查询、PL&#x2F;SQL编程基础、PL&#x2F;SQL存储过程等。若有新增，还将不断添加中。 SQL基础部分1.简介Oracle Database，又名Oracle RDBMS，或简称Oracle，是甲骨文公司的一款关系数据库管理系统">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img22_700Zcx.jpeg">
<meta property="article:published_time" content="2022-11-28T07:04:49.757Z">
<meta property="article:modified_time" content="2022-04-18T01:19:53.000Z">
<meta property="article:author" content="传礼">
<meta property="article:tag" content="博客,blog,王传礼,java,python,大数据">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img22_700Zcx.jpeg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/03/favicons_uH14Fb.gif"><link rel="canonical" href="https://iwangchuanli.github.io/posts/43893"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="qKvGNFZPF9"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?39bd6e37a6e70dc030e6a043a642784e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 传礼","link":"链接: ","source":"来源: 传礼","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Oracle 数据库速查知识文档',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-04-18 01:19:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="传礼" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/03/photo_NZBQPu.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">511</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">50</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-calendar"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 开发</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Java"><i class="fa-fw fa fa-music"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/Python"><i class="fa-fw fa fa-music"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/VUE"><i class="fa-fw fa fa-music"></i><span> VUE</span></a></li><li><a class="site-page child" href="/categories/MySQL"><i class="fa-fw fa fa-music"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/Redis"><i class="fa-fw fa fa-music"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 架构</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Spring"><i class="fa-fw fa fa-music"></i><span> Spring</span></a></li><li><a class="site-page child" href="/categories/microServeices"><i class="fa-fw fa fa-music"></i><span> 微服务</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Docker"><i class="fa-fw fa fa-music"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/Linux"><i class="fa-fw fa fa-music"></i><span> Linux</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 分享</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 图书</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa fa-commenting"></i><span> 说说</span></a></li><li><a class="site-page child" href="/todo/"><i class="fa-fw fa fa-flag"></i><span> TODO</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img22_700Zcx.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">传礼</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-calendar"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 开发</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Java"><i class="fa-fw fa fa-music"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/Python"><i class="fa-fw fa fa-music"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/VUE"><i class="fa-fw fa fa-music"></i><span> VUE</span></a></li><li><a class="site-page child" href="/categories/MySQL"><i class="fa-fw fa fa-music"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/Redis"><i class="fa-fw fa fa-music"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 架构</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Spring"><i class="fa-fw fa fa-music"></i><span> Spring</span></a></li><li><a class="site-page child" href="/categories/microServeices"><i class="fa-fw fa fa-music"></i><span> 微服务</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Docker"><i class="fa-fw fa fa-music"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/Linux"><i class="fa-fw fa fa-music"></i><span> Linux</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 分享</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 图书</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa fa-commenting"></i><span> 说说</span></a></li><li><a class="site-page child" href="/todo/"><i class="fa-fw fa fa-flag"></i><span> TODO</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Oracle 数据库速查知识文档</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-28T07:04:49.757Z" title="发表于 2022-11-28 07:04:49">2022-11-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-04-18T01:19:53.000Z" title="更新于 2022-04-18 01:19:53">2022-04-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>49分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Oracle 数据库速查知识文档"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Oracle数据库速查知识文档"><a href="#Oracle数据库速查知识文档" class="headerlink" title="Oracle数据库速查知识文档"></a>Oracle数据库速查知识文档</h1><h4 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h4><p>该项目记录了Oracle相关的速查知识汇总，主要涉及了oracle基础使用、SQL基础、oracle函数、oracle触发器、oracle高级查询、PL/SQL编程基础、PL/SQL存储过程等。若有新增，还将不断添加中。</p>
<h2 id="SQL基础部分"><a href="#SQL基础部分" class="headerlink" title="SQL基础部分"></a>SQL基础部分</h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>Oracle Database，又名Oracle RDBMS，或简称Oracle，是甲骨文公司的一款关系数据库管理系统。本课程主要介绍Oracle的SQL基础，包括表空间的概念，如何登录Oracle数据库，如何管理表及表中的数据，以及约束的应用。为后续课程的学习打下一个良好的基础。</p>
<h3 id="2-安装好之后可以登录系统账户"><a href="#2-安装好之后可以登录系统账户" class="headerlink" title="2.安装好之后可以登录系统账户"></a>2.安装好之后可以登录系统账户</h3><p>打开sqlplus，输入用户名system或sys（后者有最高权限）和自己设置的口令就可以登录了。</p>
<h3 id="3-用户与表空间"><a href="#3-用户与表空间" class="headerlink" title="3.用户与表空间"></a>3.用户与表空间</h3><p>系统用户有哪些？</p>
<p>sys,system   前者高于后者，前者必须以管理员权限登录<br>sysman   操作企业管理的用户，也是管理员用户</p>
<p>scott    普通用户</p>
<p>前三者用户的密码是安装时设置的，scott的默认密码是tiger</p>
<p>登录通用语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[username/password][@server][as sysdba|sysoper]</span><br></pre></td></tr></table></figure>
<p>如果是远程登录，则需要输入IP地址。</p>
<p>也可以在前面加一个connect，比如<code>connect as sysdba;</code></p>
<h3 id="4-数据字典"><a href="#4-数据字典" class="headerlink" title="4.数据字典"></a>4.数据字典</h3><h4 id="（1）数据字典介绍"><a href="#（1）数据字典介绍" class="headerlink" title="（1）数据字典介绍"></a>（1）数据字典介绍</h4><p>数据字典是Oracle存放有关数据库信息的地方，其用途是用来描述数据的。比如一个表的创建者信息，创建时间信息，所属表空间信息，用户访问权限信息等。当用户在对数据库中的数据进行操作时遇到困难就可以访问数据字典来查看详细的信息。</p>
<p>dba_开头的是管理员才能查看的数据字典，users_开头的是都能查看的数据字典。</p>
<p>数据字典或表前加上desc可以查看他们的结构。</p>
<p>比如desc dba_users查看数据字典的信息。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username from dba_users;</span><br></pre></td></tr></table></figure>
<p>可以从数据字典里面查看用户的名字。</p>
<h4 id="（2）查看用户的数据字典dba-users"><a href="#（2）查看用户的数据字典dba-users" class="headerlink" title="（2）查看用户的数据字典dba_users"></a>（2）查看用户的数据字典dba_users</h4><p>dba_users、user_users用来查看不同权限级别的数据字典。使用示例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select default_tablespace,temporary_tablespace from dba_users where username=&#x27;SYSTEM&#x27;;</span><br></pre></td></tr></table></figure>

<h4 id="（3）数据字典dba-data-files，查看数据文件的"><a href="#（3）数据字典dba-data-files，查看数据文件的" class="headerlink" title="（3）数据字典dba_data_files，查看数据文件的"></a>（3）数据字典dba_data_files，查看数据文件的</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select file_name from dba_data_files where tablespace_name = &#x27;TEST1_TABLESPACE&#x27;;</span><br></pre></td></tr></table></figure>
<p>得到结果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FILE_NAME</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">D:\APP\HP\PRODUCT\11.2.0\DBHOME_1\DATABASE\TEST1FILE.DBF</span><br></pre></td></tr></table></figure>
<p>类似的字典 dba_temp_files（查看临时表空间文件的）</p>
<h3 id="5-如何启用scott用户"><a href="#5-如何启用scott用户" class="headerlink" title="5.如何启用scott用户"></a>5.如何启用scott用户</h3><p>默认情况下是锁定的。<br>启用语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter user username(可以替换) account unlock;</span><br></pre></td></tr></table></figure>
<h3 id="6-表空间"><a href="#6-表空间" class="headerlink" title="6.表空间"></a>6.表空间</h3><h4 id="（1）表空间介绍"><a href="#（1）表空间介绍" class="headerlink" title="（1）表空间介绍"></a>（1）表空间介绍</h4><p>表空间就是在数据库中开辟的一个空间用来存储我们的数据库对象，一个数据库可以由多个表空间构成。</p>
<p>表空间由一个或多个数据文件构成，大小可以由用户来定义。</p>
<p>表空间的分类：</p>
<ul>
<li>永久表空间</li>
<li>临时表空间</li>
<li>UNDO表空间</li>
</ul>
<p>永久表空间主要存储数据库中要永久存储的对象，表、视图、存储过程。临时表空间存储数据库操作当中中间执行的过程，执行结束之后自动释放掉，不进行永久性保存。UNDO表空间用于保存事务所修改数据的旧值，可以做回滚操作。</p>
<h4 id="（2）如何查看用户的表空间？"><a href="#（2）如何查看用户的表空间？" class="headerlink" title="（2）如何查看用户的表空间？"></a>（2）如何查看用户的表空间？</h4><p>数据字典：dba_tablespaces（针对管理员级别的用户）、user_tablespaces（针对普通用户的数据字典）</p>
<p>dba的表空间中，system用于管理员，也叫系统表空间，sysaux为示例的辅助表空间，undotbs1用于存储撤销信息的，temp用于存储处理的表和索引信息的临时表空间，users用于存储用户创建的数据库对象，example表空间等。</p>
<h4 id="（3）如何设置用户的默认或者临时表空间"><a href="#（3）如何设置用户的默认或者临时表空间" class="headerlink" title="（3）如何设置用户的默认或者临时表空间"></a>（3）如何设置用户的默认或者临时表空间</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter user username default|temporary tablespace tablespace_name;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter user system default tablespace system;</span><br></pre></td></tr></table></figure>

<h4 id="（4）创建表空间"><a href="#（4）创建表空间" class="headerlink" title="（4）创建表空间"></a>（4）创建表空间</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create [temporary] tabalspace tablespace_name tempfile|datafile &#x27;xx.dbf&#x27; size xx;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create tablespace test1_tablespace datafile &#x27;test1file.dbf&#x27; size 10M;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create temporary tablespace temptest1_tablespace tempfile &#x27;tempfile1.dbf&#x27; size 10M;</span><br></pre></td></tr></table></figure>

<h4 id="（5）修改表空间的状态"><a href="#（5）修改表空间的状态" class="headerlink" title="（5）修改表空间的状态"></a>（5）修改表空间的状态</h4><h5 id="设置在线离线状态"><a href="#设置在线离线状态" class="headerlink" title="设置在线离线状态"></a>设置在线离线状态</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter tablespace tablespace_name online|offline;  --脱机状态不能使用它</span><br></pre></td></tr></table></figure>
<p>dba_tablespaces字典下面的status状态可以查看状态。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select status from dba_tablespaces where tablespace_name = &#x27;TEST1_TABLESPACE&#x27;;</span><br></pre></td></tr></table></figure>
<h5 id="设置只读或可读写状态，一般是read-write可读写的状态"><a href="#设置只读或可读写状态，一般是read-write可读写的状态" class="headerlink" title="设置只读或可读写状态，一般是read write可读写的状态"></a>设置只读或可读写状态，一般是read write可读写的状态</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter tablespace tablespace_name read only|read write;  --前提是表空间是一定是在线状态</span><br></pre></td></tr></table></figure>
<h4 id="（6）增加数据文件"><a href="#（6）增加数据文件" class="headerlink" title="（6）增加数据文件"></a>（6）增加数据文件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter tablespace tablespace_name add datafile &#x27;xx.dbf&#x27; size xx;</span><br></pre></td></tr></table></figure>
<p>添加后使用dba_data_files来查询。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select file_name from dba_data_files where tablespace_name=&#x27;TEST1_TABLESPACE&#x27;;</span><br></pre></td></tr></table></figure>
<h4 id="（7）删除数据文件"><a href="#（7）删除数据文件" class="headerlink" title="（7）删除数据文件"></a>（7）删除数据文件</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter tablespace tablespace_name drop datafile &#x27;xx.dbf&#x27;;  --注意不能删除创建表空间时候的第一个文件，如果需要删除则必须要把表空间删掉。</span><br></pre></td></tr></table></figure>
<h4 id="（8）删除表空间"><a href="#（8）删除表空间" class="headerlink" title="（8）删除表空间"></a>（8）删除表空间</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop tablespace tablespace_name [including contents];  --如果需要把数据文件也删除则把后面加上。</span><br></pre></td></tr></table></figure>
<h3 id="7-数据表"><a href="#7-数据表" class="headerlink" title="7.数据表"></a>7.数据表</h3><h4 id="（1）表的介绍"><a href="#（1）表的介绍" class="headerlink" title="（1）表的介绍"></a>（1）表的介绍</h4><p>表是基本存储单位，要把数据都存在表中，oracle中的表都是二维结构。<br>一行也可以叫做记录，一列也可以叫做域或者字段。<br>约定：要求每一列需要有相同的数据类型。<br>列名要是唯一的。<br>每一行的数据是唯一的。</p>
<h4 id="（2）表中的数据类型"><a href="#（2）表中的数据类型" class="headerlink" title="（2）表中的数据类型"></a>（2）表中的数据类型</h4><h5 id="字符型"><a href="#字符型" class="headerlink" title="字符型"></a>字符型</h5><ul>
<li>固定长度类型：char(n)（max2000）,nchar(n)（unicode格式，max1000，多数用来存储汉字）</li>
<li>可变长度类型：varchar2(n)（max4000）,nvarchar2(n)（unicode格式，max2000）</li>
</ul>
<h5 id="数值型"><a href="#数值型" class="headerlink" title="数值型"></a>数值型</h5><ul>
<li>number(p,s) p为有效数字，s为小数点后面的位数，s可正可负</li>
<li>float(n) 用来存储二进制数据，二进制数据的1-126位，一般使用number</li>
</ul>
<h5 id="日期型"><a href="#日期型" class="headerlink" title="日期型"></a>日期型</h5><ul>
<li>date 范围为公元前4712年1月1日到公元9999年12月31日，可以精确到秒</li>
<li>timestamp  可以精确到小数秒，一般用date类型</li>
</ul>
<h5 id="其他类型"><a href="#其他类型" class="headerlink" title="其他类型"></a>其他类型</h5><ul>
<li>blob  可存4G数据以二进制存放  </li>
<li>clob  可存4G数据以字符串存放</li>
</ul>
<h4 id="（3）如何管理表"><a href="#（3）如何管理表" class="headerlink" title="（3）如何管理表"></a>（3）如何管理表</h4><h5 id="创建表："><a href="#创建表：" class="headerlink" title="创建表："></a>创建表：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table table_name(         --在同一个用户下表明要是唯一的。</span><br><span class="line">	column_name datatype,...</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo</span><br><span class="line">  (id number(6,0),</span><br><span class="line">  username varchar2(20),</span><br><span class="line">  userpwd varchar2(20),</span><br><span class="line">  email varchar2(30),</span><br><span class="line">  regdate date);</span><br></pre></td></tr></table></figure>
<p>创建完之后如果需要查看字段的信息使用desc userinfo即可查看。</p>
<h4 id="（4）如何修改表的结构"><a href="#（4）如何修改表的结构" class="headerlink" title="（4）如何修改表的结构"></a>（4）如何修改表的结构</h4><h5 id="添加字段"><a href="#添加字段" class="headerlink" title="添加字段"></a>添加字段</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name add column_name datatype;</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table userinfo add remarks varchar2(500);</span><br></pre></td></tr></table></figure>
<h5 id="更改字段数据类型"><a href="#更改字段数据类型" class="headerlink" title="更改字段数据类型"></a>更改字段数据类型</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name modify column_name datatype;  --改长度或者更换数据类型</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table userinfo modify remarks varchar2(400);</span><br></pre></td></tr></table></figure>
<h5 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name drop column column_name;</span><br></pre></td></tr></table></figure>
<h5 id="修改字段名"><a href="#修改字段名" class="headerlink" title="修改字段名"></a>修改字段名</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name rename column column_name to new_column_name;</span><br></pre></td></tr></table></figure>
<h5 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rename table_name to new_table_name;</span><br></pre></td></tr></table></figure>
<h4 id="（5）删除表"><a href="#（5）删除表" class="headerlink" title="（5）删除表"></a>（5）删除表</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">truncate table table_name;  --删除表中的全部数据，没有删除表，比delete快很多。</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop table table_name;   数据和结构都删掉。</span><br></pre></td></tr></table></figure>
<h4 id="（6）操作表中的数据"><a href="#（6）操作表中的数据" class="headerlink" title="（6）操作表中的数据"></a>（6）操作表中的数据</h4><h5 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into table_name (column1,column2,...) values (value1,value2,...);  --如果是所有字段都添加值，则表明后面的小括号可以省略。</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo values (1,&#x27;xxx&#x27;,&#x27;123&#x27;,&#x27;xxx@126.com&#x27;,sysdate);  --sysdate可以获取当前系统日期</span><br></pre></td></tr></table></figure>
<p>查询<code>select * from userinfo;</code><br>又如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo (id,username,userpwd) values (2,&#x27;yyy&#x27;,&#x27;123&#x27;);</span><br></pre></td></tr></table></figure>
<h4 id="（7）设置某字段的默认值"><a href="#（7）设置某字段的默认值" class="headerlink" title="（7）设置某字段的默认值"></a>（7）设置某字段的默认值</h4><h5 id="创建表时添加"><a href="#创建表时添加" class="headerlink" title="创建表时添加"></a>创建表时添加</h5><p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo1(id number(6,0),regdate date default sysdate);  --使用default关键词，虽然指定了默认值，但是在添加的时候还是要指定字段名才行</span><br></pre></td></tr></table></figure>
<p>在创建表以后添加默认值：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table userinfo modify email default &#x27;无&#x27;;  --如果在新加记录的时候不想要默认值了，则按正常的添加方式添加了就可以替换默认值了</span><br></pre></td></tr></table></figure>
<h4 id="（8）复制表数据"><a href="#（8）复制表数据" class="headerlink" title="（8）复制表数据"></a>（8）复制表数据</h4><h5 id="在建表时复制"><a href="#在建表时复制" class="headerlink" title="在建表时复制"></a>在建表时复制</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table table_new as select column1,...|* from table_old;  --可以选择要复制的字段也可以复制所有</span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_new as select * from userinfo;  --userinfo是被复制的表</span><br></pre></td></tr></table></figure>
<h5 id="部分字段复制如"><a href="#部分字段复制如" class="headerlink" title="部分字段复制如"></a>部分字段复制如</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_new1 as select id,username from userinfo;</span><br></pre></td></tr></table></figure>
<h5 id="在添加时复制"><a href="#在添加时复制" class="headerlink" title="在添加时复制"></a>在添加时复制</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into table_new [(column1,...)] select column1,...|* from table_old;  --顺序和数据类型要完全一致</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo_new select * from userinfo;</span><br></pre></td></tr></table></figure>
<p>又如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo_new (id,username) select id,username from userinfo;</span><br></pre></td></tr></table></figure>
<h4 id="（9）修改表的数据"><a href="#（9）修改表的数据" class="headerlink" title="（9）修改表的数据"></a>（9）修改表的数据</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update tabel_name set column1=value1,...[where conditions];</span><br></pre></td></tr></table></figure>
<h5 id="无条件更新："><a href="#无条件更新：" class="headerlink" title="无条件更新："></a>无条件更新：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update userinfo set userpwd = &#x27;111111&#x27;;</span><br></pre></td></tr></table></figure>
<h5 id="有条件的更新："><a href="#有条件的更新：" class="headerlink" title="有条件的更新："></a>有条件的更新：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">update userinfo set userpwd=&#x27;123456&#x27; where username =&#x27;xxx&#x27;;</span><br></pre></td></tr></table></figure>
<h4 id="（10）删除数据"><a href="#（10）删除数据" class="headerlink" title="（10）删除数据"></a>（10）删除数据</h4><h5 id="只能以行为单位来删除数据"><a href="#只能以行为单位来删除数据" class="headerlink" title="只能以行为单位来删除数据"></a>只能以行为单位来删除数据</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete from table_name;   --删除全部数据，效率慢些</span><br><span class="line">delete from table_name [where conditions];</span><br></pre></td></tr></table></figure>
<h5 id="无条件删除"><a href="#无条件删除" class="headerlink" title="无条件删除"></a>无条件删除</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete from testdel;</span><br></pre></td></tr></table></figure>
<h5 id="有条件的删除"><a href="#有条件的删除" class="headerlink" title="有条件的删除"></a>有条件的删除</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">delete from userinfo where username=&#x27;yyy&#x27;;</span><br></pre></td></tr></table></figure>
<h3 id="8-约束"><a href="#8-约束" class="headerlink" title="8.约束"></a>8.约束</h3><h4 id="（1）约束的介绍"><a href="#（1）约束的介绍" class="headerlink" title="（1）约束的介绍"></a>（1）约束的介绍</h4><p>约束的作用是定义规则（<code>最重要</code>），确保完整性。</p>
<h4 id="（2）约束的种类"><a href="#（2）约束的种类" class="headerlink" title="（2）约束的种类"></a>（2）约束的种类</h4><ul>
<li>非空约束</li>
<li>主键约束</li>
<li>外键约束</li>
<li>唯一约束</li>
<li>检查约束<h4 id="（3）非空约束"><a href="#（3）非空约束" class="headerlink" title="（3）非空约束"></a>（3）非空约束</h4><h5 id="在创建表时设置非空约束："><a href="#在创建表时设置非空约束：" class="headerlink" title="在创建表时设置非空约束："></a>在创建表时设置非空约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table table_name(column_name datatype not null,...);</span><br></pre></td></tr></table></figure>
如：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_1 (id number(6,0),</span><br><span class="line">                               username varchar2(20) not null,</span><br><span class="line">                               userpwd varchar2(20) not null);</span><br></pre></td></tr></table></figure>
<h5 id="在修改表时添加非空约束："><a href="#在修改表时添加非空约束：" class="headerlink" title="在修改表时添加非空约束："></a>在修改表时添加非空约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table tabel_name modify column_name datatype not null;</span><br></pre></td></tr></table></figure>
如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table userinfo modify username varchar2(20) not null;  --在修改之前表里面不要有任何数据</span><br></pre></td></tr></table></figure>
<h5 id="在修改表时去除非空约束："><a href="#在修改表时去除非空约束：" class="headerlink" title="在修改表时去除非空约束："></a>在修改表时去除非空约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table tabel_name modify column_name datatype null;</span><br></pre></td></tr></table></figure>
<h3 id="（4）主键约束"><a href="#（4）主键约束" class="headerlink" title="（4）主键约束"></a>（4）主键约束</h3>必不可少，确定每一行数据的唯一性。</li>
</ul>
<p>一张表只能设计一个主键约束。</p>
<p>主键约束可以由多个字段构成，称为联合主键或者复合主键。</p>
<h5 id="在创建表时设置主键约束："><a href="#在创建表时设置主键约束：" class="headerlink" title="在创建表时设置主键约束："></a>在创建表时设置主键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table table_name(column_name datatype primary key,...);</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_p(id number(6,0) primary key,</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       userpwd varchar2(20));</span><br></pre></td></tr></table></figure>
<p>如果用约束的话：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">constraint constraint_name primary key (column_name1,...);  --一般用来创建联合主键</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_p1(id number(6,0),</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       userpwd varchar2(20),</span><br><span class="line">       constraint pk_id_username primary key(id,username));</span><br></pre></td></tr></table></figure>
<p>如果忘记了约束的名字，可以到<code>user_constraints</code>数据字典查询constraint_name.<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select constraint_name from user_constraints where table_name=&#x27;USERINFO_P1&#x27;;</span><br></pre></td></tr></table></figure>
<p>如果没有用约束来创建主键，则系统会自动命名约束的名称，可以看这个：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select constraint_name from user_constraints where table_name=&#x27;USERINFO_P&#x27;;</span><br></pre></td></tr></table></figure>
<p>结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CONSTRAINT_NAME</span><br><span class="line">------------------------------</span><br><span class="line">SYS_C0011189</span><br></pre></td></tr></table></figure>
<h5 id="在修改表时添加主键约束："><a href="#在修改表时添加主键约束：" class="headerlink" title="在修改表时添加主键约束："></a>在修改表时添加主键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add constraint constraint_name primary key(column_name1,...);   --主键名一般以pk_开头</span><br><span class="line">alter table userinfo add constraint pk_id primary key(id);   --设置约束之前，如果已经有值了，必须唯一，且不能为空。</span><br></pre></td></tr></table></figure>
<h5 id="更改约束的名称，可以修改任何约束的名字"><a href="#更改约束的名称，可以修改任何约束的名字" class="headerlink" title="更改约束的名称，可以修改任何约束的名字"></a>更改约束的名称，可以修改任何约束的名字</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name rename constraint old_name to new_name;</span><br></pre></td></tr></table></figure>
<h5 id="删除主键约束："><a href="#删除主键约束：" class="headerlink" title="删除主键约束："></a>删除主键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name disable|enable constraint constraint_name;   --禁用|启用约束，不删除</span><br></pre></td></tr></table></figure>
<p>查看状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select constraint_name,status from user_constraints where table_name=&#x27;USERINFO&#x27;;</span><br></pre></td></tr></table></figure>
<h5 id="如果是完全删除："><a href="#如果是完全删除：" class="headerlink" title="如果是完全删除："></a>如果是完全删除：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table table_name drop constraint constraint_name;</span><br></pre></td></tr></table></figure>
<h5 id="还有一种方法："><a href="#还有一种方法：" class="headerlink" title="还有一种方法："></a>还有一种方法：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop primary key[cascade];   --删除主键约束，如果存在外键约束，填写cascade，可以把其他表中引用该主键约束的一起删掉</span><br></pre></td></tr></table></figure>
<h4 id="（5）外键约束"><a href="#（5）外键约束" class="headerlink" title="（5）外键约束"></a>（5）外键约束</h4><p>两个表之中字段关系的约束。</p>
<h5 id="在创建表的时候设置外键约束："><a href="#在创建表的时候设置外键约束：" class="headerlink" title="在创建表的时候设置外键约束："></a>在创建表的时候设置外键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--分开创建时</span><br><span class="line">create table table1(column_name datatype references table2(column_name),...);</span><br><span class="line">--table2为主表，table1为从表，也叫主从表。主表当中的字段必须是主表中的主键字段，主从表的字段要设置成同一个数据类型。在向设置了外键约束的表输入值的时候，从表中外键字段的值必须来自主表中的相应字段的值，或者为null值。</span><br></pre></td></tr></table></figure>
<h5 id="如创建主表："><a href="#如创建主表：" class="headerlink" title="如创建主表："></a>如创建主表：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table typeinfo(typeid varchar2(10) primary key,</span><br><span class="line">       typename varchar2(20));</span><br></pre></td></tr></table></figure>
<h5 id="创建从表："><a href="#创建从表：" class="headerlink" title="创建从表："></a>创建从表：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_f(id varchar2(10) primary key,</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       typeid_new varchar2(10) references typeinfo(typeid));</span><br></pre></td></tr></table></figure>
<h5 id="然后给主表插入数据："><a href="#然后给主表插入数据：" class="headerlink" title="然后给主表插入数据："></a>然后给主表插入数据：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into typeinfo values(1,1);</span><br></pre></td></tr></table></figure>
<h5 id="如果这样给从表插入数据："><a href="#如果这样给从表插入数据：" class="headerlink" title="如果这样给从表插入数据："></a>如果这样给从表插入数据：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo_f(id,typeid_new) values (1,2);</span><br></pre></td></tr></table></figure>
<p>则2在主表中没有找到，会报错。需要填写</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo_f(id,typeid_new) values (1,1);</span><br></pre></td></tr></table></figure>
<p>才可以，或者那个部分留空值：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into userinfo_f(id,typeid_new) values (2,null);</span><br></pre></td></tr></table></figure>
<h5 id="在创建表的时候设置外键约束：-1"><a href="#在创建表的时候设置外键约束：-1" class="headerlink" title="在创建表的时候设置外键约束："></a>在创建表的时候设置外键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--定义完所有的字段之后设置的约束</span><br><span class="line">constraint constraint_name foreign key(column_name) references table_name(column_name) [on delete cascade];   </span><br><span class="line">--后面的中括号是级联删除，表示主表当中的一条数据被删除的时候，从表当中使用了这条数据的字段所在的行也会被一起删除掉，这样确保了主从表数据的完整性。</span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_f2 (id varchar2(10) primary key,</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       typeid_new varchar2(10),</span><br><span class="line">       constraint fk_typeid_new foreign key (typeid_new) references typeinfo(typeid));</span><br></pre></td></tr></table></figure>
<h5 id="如果添加级联删除："><a href="#如果添加级联删除：" class="headerlink" title="如果添加级联删除："></a>如果添加级联删除：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_f3 (id varchar2(10) primary key,</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       typeid_new varchar2(10),</span><br><span class="line">       constraint fk_typeid_new1 foreign key (typeid_new) references typeinfo(typeid) on delete cascade);</span><br></pre></td></tr></table></figure>
<h5 id="在修改表时添加外键约束："><a href="#在修改表时添加外键约束：" class="headerlink" title="在修改表时添加外键约束："></a>在修改表时添加外键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table tabel_name add constraint constraint_name foreign key(column_name) references table_name(column_name) [on dedelete cascade];</span><br></pre></td></tr></table></figure>
<h5 id="删除外键约束"><a href="#删除外键约束" class="headerlink" title="删除外键约束"></a>删除外键约束</h5><h5 id="禁用外键约束："><a href="#禁用外键约束：" class="headerlink" title="禁用外键约束："></a>禁用外键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">disable|enable constraint constraint_name;</span><br></pre></td></tr></table></figure>
<h5 id="彻底删除外键约束："><a href="#彻底删除外键约束：" class="headerlink" title="彻底删除外键约束："></a>彻底删除外键约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop constraint constraint_name;</span><br></pre></td></tr></table></figure>
<h4 id="（6）唯一约束"><a href="#（6）唯一约束" class="headerlink" title="（6）唯一约束"></a>（6）唯一约束</h4><p>作用是保证字段的唯一性，和主键约束的区别是，主键约束必须是非空的，而唯一约束允许有一个空值。主键约束在一张表中只能有一个，唯一约束可以有多个。</p>
<h5 id="在创建表时设置唯一约束："><a href="#在创建表时设置唯一约束：" class="headerlink" title="在创建表时设置唯一约束："></a>在创建表时设置唯一约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table tabel_name(column_name datatype unique,...);</span><br></pre></td></tr></table></figure>
<h5 id="在表级设置唯一约束："><a href="#在表级设置唯一约束：" class="headerlink" title="在表级设置唯一约束："></a>在表级设置唯一约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">constraint constraint_name unique(column_name);   --如果需要设置多个字段为唯一约束，要写多个constraint子句。</span><br></pre></td></tr></table></figure>
<h5 id="在修改表时添加唯一约束："><a href="#在修改表时添加唯一约束：" class="headerlink" title="在修改表时添加唯一约束："></a>在修改表时添加唯一约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add constraint constraint_name unique(column_name);</span><br></pre></td></tr></table></figure>
<h5 id="删除唯一约束："><a href="#删除唯一约束：" class="headerlink" title="删除唯一约束："></a>删除唯一约束：</h5><p>禁用：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">disable|enable constraint constraint_name;</span><br></pre></td></tr></table></figure>
<p>完全删除：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop constraint constraint_name;</span><br></pre></td></tr></table></figure>
<h4 id="（7）检查约束"><a href="#（7）检查约束" class="headerlink" title="（7）检查约束"></a>（7）检查约束</h4><p>检查约束，让表当中的值更具有实际意义，能够满足一定的条件，具有实际意义。</p>
<h5 id="在创建表时设置检查约束："><a href="#在创建表时设置检查约束：" class="headerlink" title="在创建表时设置检查约束："></a>在创建表时设置检查约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table tabel_name(column_name datatype check(expression),...);</span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_c (id varchar2(10) primary key,</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       salary number(5,0) check(salary&gt;0));</span><br></pre></td></tr></table></figure>
<p>比如输入<code>insert into userinfo_c values(1,&#39;aaa&#39;,-50);</code>就会报错。</p>
<h5 id="在表级设置检查约束："><a href="#在表级设置检查约束：" class="headerlink" title="在表级设置检查约束："></a>在表级设置检查约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">constraint constraint_name check(expression);</span><br></pre></td></tr></table></figure>
<p>如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create table userinfo_c1(id varchar2(10) primary key,</span><br><span class="line">       username varchar2(20),</span><br><span class="line">       salary number(5,0),</span><br><span class="line">       constraint ck_salary check(salary&gt;0));</span><br></pre></td></tr></table></figure>
<h5 id="在修改表时添加检查约束："><a href="#在修改表时添加检查约束：" class="headerlink" title="在修改表时添加检查约束："></a>在修改表时添加检查约束：</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add constraint constraint_name check(expression);</span><br></pre></td></tr></table></figure>
<h5 id="删除检查约束："><a href="#删除检查约束：" class="headerlink" title="删除检查约束："></a>删除检查约束：</h5><p>禁用：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">disable|enable constraint constraint_name;</span><br></pre></td></tr></table></figure>
<p>删除：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop constraint constraint_name;</span><br></pre></td></tr></table></figure>
<h4 id="（8）总结五个约束"><a href="#（8）总结五个约束" class="headerlink" title="（8）总结五个约束"></a>（8）总结五个约束</h4><ul>
<li>非空约束</li>
<li>主键约束：每张表只能有一个，可以由多个字段构成</li>
<li>外键约束：涉及两个表之间的关系</li>
<li>唯一约束</li>
<li>检查约束</li>
</ul>
<p>在创建表时设置约束：<br>只有非空约束只能在列级设置约束，不能在表级设置约束，其他的都是两者都可以的。非空约束是没有名字的。</p>
<p>在修改表时添加约束，也是只有非空约束不同，修改表时用的语句是</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table talbe_name modify column_name datatype not null;</span><br></pre></td></tr></table></figure>
<p>更改约束的名称：数据字典（user_constraints查看名称）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rename constraint old_name to new_name;</span><br></pre></td></tr></table></figure>
<p>删除约束，非空约束较特殊</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter table tabel_name modify column_name datatype null;</span><br></pre></td></tr></table></figure>
<p>其他的如果是禁用的话使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">disable|enable constraint constraint_name;</span><br></pre></td></tr></table></figure>
<p>如果要永久删除可以用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop constraint constraint_name;</span><br></pre></td></tr></table></figure>
<p>删除主键约束还能用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">drop primary key;</span><br></pre></td></tr></table></figure>
<h3 id="9-基本查询"><a href="#9-基本查询" class="headerlink" title="9.基本查询"></a>9.基本查询</h3><h4 id="（1）查询基本语句"><a href="#（1）查询基本语句" class="headerlink" title="（1）查询基本语句"></a>（1）查询基本语句</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select [distinct] column_name1,...|* from table_name [where conditions];  --distinct可以不显示重复的行。</span><br></pre></td></tr></table></figure>
<h4 id="（2）在SQL-PLUS中设置格式"><a href="#（2）在SQL-PLUS中设置格式" class="headerlink" title="（2）在SQL*PLUS中设置格式"></a>（2）在SQL*PLUS中设置格式</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">column column_name heading new_name;  </span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">col username heading 用户名;   --执行成功的话不会有回显</span><br><span class="line">--column可以简写成col，设置新的字段名（别名），使用select语句来查询的时候就可以看到变化了，但使用desc看结构还依然不变化。</span><br></pre></td></tr></table></figure>
<p>设置结果显示的格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">column column_name format dataformat;</span><br></pre></td></tr></table></figure>
<p>注意：字符类型只能设置它的长度。   –字符格式用a开头，后面跟它要的长度。<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">col username format a10;</span><br></pre></td></tr></table></figure>
<p>如果是数值类型用，9表示一位数字，比如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">col salary format 9999.9;</span><br></pre></td></tr></table></figure>
<p>可以保留4位数和一位小数。<br>如果</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">col salary format 999.9;</span><br></pre></td></tr></table></figure>
<p>但如果数据中有四位的数，超过这个长度的就用#####表示了，与excel一致。</p>
<p>如果使用col salary format $9999.9;则数字前面加了美元符号。</p>
<p>清除之前设置过的格式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">column column_name clear;</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">col salary clear;</span><br></pre></td></tr></table></figure>
<h4 id="（3）查询表中的所有字段"><a href="#（3）查询表中的所有字段" class="headerlink" title="（3）查询表中的所有字段"></a>（3）查询表中的所有字段</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from table_name;</span><br></pre></td></tr></table></figure>
<p>查询指定的字段：比如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username,salary from users;</span><br></pre></td></tr></table></figure>
<h4 id="（4）给字段设置别名"><a href="#（4）给字段设置别名" class="headerlink" title="（4）给字段设置别名"></a>（4）给字段设置别名</h4><p>不会更改字段的名字，可以为多个字段设置别名</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select column_name as new_name,... from table_name;  --其中as可以省略，但最好加上</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select id as 编号, username as 用户名, salary 工资 from users;</span><br></pre></td></tr></table></figure>
<p>查看唯一值：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select distinct username as 用户名 from users;</span><br></pre></td></tr></table></figure>
<h4 id="（5）运算符和表达式"><a href="#（5）运算符和表达式" class="headerlink" title="（5）运算符和表达式"></a>（5）运算符和表达式</h4><p>运算符大家都比较熟悉了，而表达式=操作数+运算符组成。</p>
<p>oracle中的操作数可以有变量、常量、字段。</p>
<p>运算符有算术运算符（+、-、*、/），比较运算符（&gt;,&gt;=,&lt;,&lt;=,=,&lt;&gt;都是用在where条件里面的，两个数进行比较得到的结果是布尔类型的，真或者假），逻辑运算符（and,or,not）</p>
<h5 id="在select语句中使用运算符"><a href="#在select语句中使用运算符" class="headerlink" title="在select语句中使用运算符"></a>在select语句中使用运算符</h5><p>在查询结果中，给每个员工的工资加上200元，但数据本身没变。<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select id,username,salary+200 from users;</span><br></pre></td></tr></table></figure>
<p>使用比较运算符：</p>
<p>查询工资高于800元的员工的姓名；<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username from users where salary &gt; 800;</span><br></pre></td></tr></table></figure>
<p>使用逻辑运算符：<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username from users where salary &gt; 800 and salary &lt;&gt;1800.5;</span><br><span class="line">select username from users where salary &gt; 800 or salary &lt;&gt;1800.5;</span><br></pre></td></tr></table></figure>
<h4 id="（6）带条件的查询"><a href="#（6）带条件的查询" class="headerlink" title="（6）带条件的查询"></a>（6）带条件的查询</h4><p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select salary from users where username=&#x27;aaa&#x27;;</span><br><span class="line">select username,salary from users where id=3;</span><br></pre></td></tr></table></figure>
<p>多条件如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from users where username=&#x27;aaa&#x27; or salary&lt;=2000 and salary&gt;800;</span><br></pre></td></tr></table></figure>
<p>逻辑运算符的优先级顺序：not,and,or</p>
<p>比较运算符优先级高于逻辑运算符</p>
<p>not的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from users where not(username=&#x27;aaa&#x27;);</span><br></pre></td></tr></table></figure>
<h4 id="（7）模糊查询"><a href="#（7）模糊查询" class="headerlink" title="（7）模糊查询"></a>（7）模糊查询</h4><p>like关键字，也可以归入比较运算符当中。</p>
<p>通配符的使用（_表示一个字符，%表示0到多个任意字符）<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from users where username like &#x27;a%&#x27;;  --以a开头的行</span><br><span class="line">select username from users where username like &#x27;%a%&#x27;;   --含有a的</span><br></pre></td></tr></table></figure>
<h4 id="（8）范围查询"><a href="#（8）范围查询" class="headerlink" title="（8）范围查询"></a>（8）范围查询</h4><p>between…and   –表示从什么到什么之间。查询结果是含头又含尾的区间。</p>
<p>如果不在这个之间的，在它们前面加上not<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from users where salary not between 800 and 2000;</span><br></pre></td></tr></table></figure>
<p>in/not in   后面跟着小括号，里面是一个列表的值，一个具体的值。<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from users where username in (&#x27;aaa&#x27;,&#x27;bbb&#x27;);</span><br><span class="line">select * from users where username not in (&#x27;aaa&#x27;,&#x27;bbb&#x27;);</span><br></pre></td></tr></table></figure>
<h4 id="（9）对查询结果排序"><a href="#（9）对查询结果排序" class="headerlink" title="（9）对查询结果排序"></a>（9）对查询结果排序</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select...from...[where...] order by column1 desc/asc,...  --desc为降序排列，asc升序</span><br></pre></td></tr></table></figure>
<h4 id="（10）case…when语句"><a href="#（10）case…when语句" class="headerlink" title="（10）case…when语句"></a>（10）case…when语句</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">case column_name when value1 then result1,...[else result] end;</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username,case username when &#x27;aaa&#x27; then &#x27;计算机部门&#x27;</span><br><span class="line">    when &#x27;bbb&#x27; then &#x27;市场部门&#x27; else &#x27;其他部门&#x27; end as 部门</span><br><span class="line">    from users;</span><br></pre></td></tr></table></figure>
<p>另一种形式：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">case when column_name=value1 then result1,...[else result] end;</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username,case when username=&#x27;aaa&#x27; then &#x27;计算机部门&#x27;</span><br><span class="line">    when username=&#x27;bbb&#x27; then &#x27;市场部门&#x27; else &#x27;其他部门&#x27; end as 部门</span><br><span class="line">    from users;</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username,case when salary&lt;800 then &#x27;工资低&#x27; when salary&gt;5000 then &#x27;工资高&#x27; end as 工资水平 from users;</span><br></pre></td></tr></table></figure>
<h4 id="（11）decode函数的使用"><a href="#（11）decode函数的使用" class="headerlink" title="（11）decode函数的使用"></a>（11）decode函数的使用</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">decode(column_name,value1,result1,...,defaultvalue)</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select username,decode(username,&#x27;aaa&#x27;,&#x27;计算机部门&#x27;,&#x27;bbb&#x27;,&#x27;市场部门&#x27;,&#x27;其他&#x27;) as 部门 from users;</span><br></pre></td></tr></table></figure>


<h3 id="10-其他一些实用命令"><a href="#10-其他一些实用命令" class="headerlink" title="10.其他一些实用命令"></a>10.其他一些实用命令</h3><ul>
<li>可以使用host cls来清屏。</li>
<li>查看用户show user。</li>
<li>使用上下箭头可以选择历史输入记录来使用。</li>
</ul>
<p>=====================================================================================</p>
<h2 id="Oracle函数部分"><a href="#Oracle函数部分" class="headerlink" title="Oracle函数部分"></a>Oracle函数部分</h2><h3 id="1-函数的作用"><a href="#1-函数的作用" class="headerlink" title="1.函数的作用"></a>1.函数的作用</h3><ul>
<li>方便数据的统计</li>
<li>处理查询结果<h3 id="2-函数的分类"><a href="#2-函数的分类" class="headerlink" title="2.函数的分类"></a>2.函数的分类</h3></li>
<li>数值函数</li>
<li>字符函数</li>
<li>日期函数</li>
<li>转换函数<h3 id="3-数值函数"><a href="#3-数值函数" class="headerlink" title="3.数值函数"></a>3.数值函数</h3><h4 id="四舍五入"><a href="#四舍五入" class="headerlink" title="四舍五入"></a>四舍五入</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">round(n[,m])</span><br></pre></td></tr></table></figure></li>
<li>省略m：0</li>
<li>m&gt;0:小数点后m位</li>
<li>m&lt;0:小数点前m位</li>
</ul>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select round(23.4),round(23.45,1),round(23.45,-1)from dual;</span><br></pre></td></tr></table></figure>
<h4 id="取整函数"><a href="#取整函数" class="headerlink" title="取整函数"></a>取整函数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ceil(n)  --取最大值</span><br><span class="line">floor(n) --取最小值</span><br><span class="line">select ceil(23.45),floor(23.45) from dual;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CEIL(23.45) FLOOR(23.45)</span><br><span class="line">----------- ------------</span><br><span class="line">         24           23</span><br></pre></td></tr></table></figure>
<h4 id="常用计算"><a href="#常用计算" class="headerlink" title="常用计算"></a>常用计算</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">abs(n)   --取绝对值</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select abs(23.45),abs(-23),abs(0) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mod(m,n)  --取余数</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select mod(5,2) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">power(m,n)  --取m的n次幂</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select power(2,3),power(null,2) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sqrt(n)   --求平方根</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select sqrt(16) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<h4 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sin(n),asin(n)</span><br><span class="line">cos(n),acos(n)</span><br><span class="line">tan(n),atan(n)   --提供弧度参数</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select sin(3.124) from dual;</span><br></pre></td></tr></table></figure>
<h3 id="4-字符函数"><a href="#4-字符函数" class="headerlink" title="4.字符函数"></a>4.字符函数</h3><h4 id="大小写转换函数"><a href="#大小写转换函数" class="headerlink" title="大小写转换函数"></a>大小写转换函数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">upper(char)   --转换为大写</span><br><span class="line">lower(char)   --转换为小写</span><br><span class="line">initcap(char)  --首字母大写</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select upper(&#x27;abde&#x27;),lower(&#x27;ADe&#x27;),initcap(&#x27;asd&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<h4 id="获取子字符"><a href="#获取子字符" class="headerlink" title="获取子字符"></a>获取子字符</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">substr(char,[m[,n]])   --获取子字符，分别是从哪取，从哪个位置开始取以及取出多少位，n省略时，从m的位置截取到结束，m从1开始如果m写0也是从第一个字符开始。如果m为负数时，从字符串的尾部开始截取</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select substr(&#x27;abcde&#x27;,2,3),substr(&#x27;abcde&#x27;,2),substr(&#x27;abcde&#x27;,-2,1) from dual;</span><br></pre></td></tr></table></figure>
<h4 id="获取字符串长度函数"><a href="#获取字符串长度函数" class="headerlink" title="获取字符串长度函数"></a>获取字符串长度函数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">length(char) --会包含空格的长度</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select length(&#x27;acd &#x27;) from dual;</span><br></pre></td></tr></table></figure>
<h4 id="字符串连接函数"><a href="#字符串连接函数" class="headerlink" title="字符串连接函数"></a>字符串连接函数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">concat(char1,char2)   --与||作用一样</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select concat(&#x27;ab&#x27;,&#x27;cd&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<h4 id="去除子串函数"><a href="#去除子串函数" class="headerlink" title="去除子串函数"></a>去除子串函数</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">trim(c2 from c1)   --代表从c1中去除c2字符串，就是子文本替换，要求c2中只能是一个字符</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trim (&#x27;a&#x27; from &#x27;abcde&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ltrim(c1[,c2])    --从c1中去除c2，从左边开始去除，要求第一个就是要去除的字符，有多少个重复的该字符就会去除多少次</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select ltrim(&#x27;ababaa&#x27;,&#x27;a&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rtrim(c1[,c2])    --从c1中去除c2，要求右侧第一个就是要去除的字符，有多少个重复的该字符就会去除多少次</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">trim(c1)   --代表去除首尾的空格，删首尾空，同理ltrim和rtrim只有一个参数时。</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">replace(char,s_string[,r_string])  --替换函数，省略第三个参数则用空白替换</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select replace(&#x27;abcde&#x27;,&#x27;a&#x27;,&#x27;A&#x27;) from dual;</span><br><span class="line">select replace(&#x27;abcde&#x27;,&#x27;c&#x27;) from dual;</span><br><span class="line">select replace(&#x27;abced&#x27;,&#x27;ab&#x27;,&#x27;A&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<h3 id="5-日期函数"><a href="#5-日期函数" class="headerlink" title="5.日期函数"></a>5.日期函数</h3><h4 id="系统时间"><a href="#系统时间" class="headerlink" title="系统时间"></a>系统时间</h4><p>sysdate   默认格式：DD-MON-RR 天-月-年</p>
<h4 id="日期操作"><a href="#日期操作" class="headerlink" title="日期操作"></a>日期操作</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">add_months(date,i)  --用于添加指定的月份，返回在指定的日期上添加的月份，i可以是任意整数，如果i是负数，则是在原有的值上减去该月份了</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select add_months(sysdate,3),add_months(sysdate,-3) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">next_day(date,char)  --第二个参数指定星期几，在中文环境下输入星期X即可，返回下一个周几是哪一天。</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select next_day(sysdate,&#x27;星期一&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">last_day(date)   --用于返回日期所在月的最后一天</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select last_day(sysdate) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">month_between(date1,date2)  --计算两个日期之间间隔的月份，前者减后者</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select months_between(&#x27;20-5月-15&#x27;,&#x27;10-1月-15&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">extract(date from datetime)   --返回相应的日期部分</span><br></pre></td></tr></table></figure>
<p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select extract(year from sysdate) from dual;   --可以改month或者day</span><br><span class="line">select extract(hour from timestamp &#x27;2015-10-1 17:25:13&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<p>=====</p>
<p>用于截取日期时间的trunc函数</p>
<p>用法：trunc（字段名，精度）</p>
<p>具体实例：</p>
<p>在表table1中，有一个字段名为sysdate，该行id=123，日期显示：2016/10/28 15:11:58</p>
<p>1、截取时间到年时，sql语句如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trunc(sysdate,&#x27;yyyy&#x27;) from table1 where id=123;  --yyyy也可用year替换</span><br></pre></td></tr></table></figure>
<p>显示：2016/1/1</p>
<p>2、截取时间到月时，sql语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trunc(sysdate,&#x27;mm&#x27;) from table1 where id=123;</span><br></pre></td></tr></table></figure>
<p>显示：2016/10/1</p>
<p>3、截取时间到日时，sql语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trunc(sysdate,&#x27;dd&#x27;) from table1 where id=123;</span><br></pre></td></tr></table></figure>
<p>显示：2016/10/28</p>
<p>4、截取时间到小时时，sql语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trunc(sysdate,&#x27;hh&#x27;) from table1 where id=123;</span><br></pre></td></tr></table></figure>
<p>显示：2016/10/28 15:00:00</p>
<p>5、截取时间到分钟时，sql语句：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select trunc(sysdate,&#x27;mi&#x27;) from table1 where id=123;</span><br></pre></td></tr></table></figure>
<p>显示：2016/10/28 15:11:00</p>
<p>6、截取时间到秒暂时不知道怎么操作</p>
<p>7、不可直接用trunc(sysdate,’yyyy-mm-dd’)，会提示“精度说明符过多”</p>
<p>8.如果不填写第二个参数，则默认到DD，包含年月日，不包含时分秒。</p>
<h3 id="6-转换函数"><a href="#6-转换函数" class="headerlink" title="6.转换函数"></a>6.转换函数</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">to_char(date[,fmt[,params]])  --date为需要转换的日期，fmt为转换的格式，params为转换的语言（通常默认会自动选择，可以省略，与安装语言一致）</span><br></pre></td></tr></table></figure>
<p>默认格式：DD-MON-RR</p>
<p>可以定义的格式：</p>
<ul>
<li>YY YYYY YEAR</li>
<li>MM MONTH</li>
<li>DD DAY</li>
<li>HH24 HH12</li>
<li>MI SS<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select to_char(sysdate,&#x27;yyyy-mm-dd hh24:mi:ss&#x27;) from dual;</span><br></pre></td></tr></table></figure>
=====<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">to_date(char[,fmt[,params]])</span><br></pre></td></tr></table></figure>
如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select to_date(&#x27;2015-05-22&#x27;,&#x27;yyyy-mm-dd&#x27;) from dual;   --注意显示的时候仍然按照时间的默认格式来显示</span><br></pre></td></tr></table></figure>
=====<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">to_char(number[,fmt])</span><br></pre></td></tr></table></figure>
fmt列表：</li>
<li>9:显示数字并忽略前面的0</li>
<li>0：显示数字，位数不足，用0补齐</li>
<li>.或D：显示小数点</li>
<li>,或G：显示千分位</li>
<li>$：美元符号</li>
<li>S：加正负号（前后都可以）<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select to_char(12345.678,&#x27;$99,999.999&#x27;) from dual;</span><br><span class="line">select to_char(12345.678,&#x27;s99,999.999&#x27;) from dual;</span><br></pre></td></tr></table></figure>
=====<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">to_number(char[,fmt])</span><br></pre></td></tr></table></figure>
fmt是转换的格式，可以省略<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select to_number(&#x27;$1,000&#x27;,&#x27;$9999&#x27;) from dual;</span><br></pre></td></tr></table></figure>
<h3 id="7-一些课堂案例"><a href="#7-一些课堂案例" class="headerlink" title="7.一些课堂案例"></a>7.一些课堂案例</h3><h4 id="在查询中使用函数"><a href="#在查询中使用函数" class="headerlink" title="在查询中使用函数"></a>在查询中使用函数</h4>如</li>
<li>在员工信息表中查询员工的生日<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">substr(char[,m[,n]])</span><br></pre></td></tr></table></figure></li>
<li>将员工信息表中的年龄字段与10取余数</li>
<li>取员工入职的年份</li>
<li>查询出5月份入职的员工信息</li>
</ul>
<p>=====================================================================================</p>
<h2 id="Oracle高级查询部分"><a href="#Oracle高级查询部分" class="headerlink" title="Oracle高级查询部分"></a>Oracle高级查询部分</h2><h3 id="1-简介-1"><a href="#1-简介-1" class="headerlink" title="1.简介"></a>1.简介</h3><p>本部分需要有如下两个部分的基础</p>
<ul>
<li><p>《oracle数据库开发必备利器之SQL基础》</p>
</li>
<li><p>《oracle数据库开发利器之函数》</p>
<h3 id="2-分组查询"><a href="#2-分组查询" class="headerlink" title="2.分组查询"></a>2.分组查询</h3><h4 id="（1）什么是分组函数"><a href="#（1）什么是分组函数" class="headerlink" title="（1）什么是分组函数"></a>（1）什么是分组函数</h4><p>分组函数作用于一组数据，并对一组数据返回一个值。<br>结构：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select [column,] group function(column),...</span><br><span class="line">from table</span><br><span class="line">[where condition]</span><br><span class="line">[group by column]</span><br><span class="line">[order by column];</span><br></pre></td></tr></table></figure>
<h4 id="（2）常见的分组函数"><a href="#（2）常见的分组函数" class="headerlink" title="（2）常见的分组函数"></a>（2）常见的分组函数</h4><h5 id="avg-求平均值-和-sum-求和"><a href="#avg-求平均值-和-sum-求和" class="headerlink" title="avg 求平均值  和  sum 求和"></a>avg 求平均值  和  sum 求和</h5></li>
<li><p>求出员工的平均工资和工资的总和</p>
</li>
<li><p>求出员工工资的最大值和最小值</p>
</li>
<li><p>求出员工的总人数</p>
</li>
<li><p>distinct关键字求出部门数<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select count(distinct deptno) from emp;</span><br></pre></td></tr></table></figure>
<h5 id="min-最小值"><a href="#min-最小值" class="headerlink" title="min 最小值"></a>min 最小值</h5><h5 id="max-最大值"><a href="#max-最大值" class="headerlink" title="max 最大值"></a>max 最大值</h5><h5 id="count-求个数"><a href="#count-求个数" class="headerlink" title="count 求个数"></a>count 求个数</h5><h5 id="wm-concat-行转列"><a href="#wm-concat-行转列" class="headerlink" title="wm_concat 行转列"></a>wm_concat 行转列</h5><p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select deptno 部门号,wm_concat(ename) 部门中员工的姓名 from emp group by deptno;</span><br></pre></td></tr></table></figure>
<h4 id="（3）分组函数与空值"><a href="#（3）分组函数与空值" class="headerlink" title="（3）分组函数与空值"></a>（3）分组函数与空值</h4></li>
<li><p>举例1：统计员工的平均工资<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select sum(sal)/count(*) 一,sum(sal)/count(sal) 二,avg(sal) 三 from emp;</span><br></pre></td></tr></table></figure>
<p>结果一样</p>
</li>
<li><p>举例二：统计员工的平均奖金<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select sum(comm)/count(*) 一,sum(comm)/count(comm) 二,avg(comm) 三 from emp;</span><br></pre></td></tr></table></figure>
<p>二和三结果一样，一不一样，因为在奖金列里面含有空值，count的时候数数不一样</p>
</li>
</ul>
<p>所以分组函数会自动忽略空值，可以在分组函数中使用nvl函数来使分组函数无法忽略空值<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select count(*),count(nvl(comm,0)) from emp;</span><br></pre></td></tr></table></figure>
<h4 id="（4）分组数据"><a href="#（4）分组数据" class="headerlink" title="（4）分组数据"></a>（4）分组数据</h4><p>group by 子句</p>
<ul>
<li>求出员工表中各个部门的平均工资<br>注意：在select列表中所有未包含在组函数（就是汇总计算xxx的列）中的列都应该包含在group by子句中，但包含在group by子句中的列不必包含在select列表中<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select avg(sal) from emp group by deptno;</span><br></pre></td></tr></table></figure>
使用多个列分组<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select deptno,job,sum(sal) from emp group by deptno,job order by deptno;</span><br></pre></td></tr></table></figure>
<h4 id="（5）非法使用组函数"><a href="#（5）非法使用组函数" class="headerlink" title="（5）非法使用组函数"></a>（5）非法使用组函数</h4>要求所用包含于select列表中，而未包含于组函数中的列都必须包含于group by子句中。<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select deptno,count(ename)</span><br><span class="line">from emp;</span><br></pre></td></tr></table></figure>
这里的deptno没有包含在group by子句中，所以会报错。<h4 id="（6）过滤分组"><a href="#（6）过滤分组" class="headerlink" title="（6）过滤分组"></a>（6）过滤分组</h4></li>
<li>求平均工资大于2000的部门，having子句的使用<br>在group by后加<code>[having group_condition]</code><br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select deptno,avg(sal) from emp group by deptno having avg(sal) &gt; 2000;</span><br></pre></td></tr></table></figure>
注意不能在where子句中使用组函数（注意）。</li>
</ul>
<p>可以在having子句中使用组函数。</p>
<p>如果在能使用where的场景下，从SQL优化的角度来看，尽量使用where效率更高，因为having是在分组的基础上过滤分组的结果，而where是先过滤，再分组。要处理的记录数不同。所以where能使分组记录数大大降低，从而提高效率。</p>
<h4 id="（7）在分组查询中使用order-by子句"><a href="#（7）在分组查询中使用order-by子句" class="headerlink" title="（7）在分组查询中使用order by子句"></a>（7）在分组查询中使用order by子句</h4><ul>
<li>示例：求每个部门的平均工资，要求显示：部门号，部门的平均工资，并且按照工资升序排列<br>可以按照：列、别名、表达式、序号进行排序<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select deptno,avg(sal) from emp group by deptno order by avg(sal);</span><br><span class="line">select deptno,avg(sal) 平均工资 from emp group by deptno order by 2;  --也可以填写序号</span><br></pre></td></tr></table></figure>
<h4 id="（8）分组函数的嵌套"><a href="#（8）分组函数的嵌套" class="headerlink" title="（8）分组函数的嵌套"></a>（8）分组函数的嵌套</h4></li>
<li>示例：求部门平均工资的最大值<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select max(avg(sal)) from emp group by deptno;</span><br></pre></td></tr></table></figure>
<h4 id="（9）group-by语句的增强"><a href="#（9）group-by语句的增强" class="headerlink" title="（9）group by语句的增强"></a>（9）group by语句的增强</h4></li>
<li>按部门、不同的职位显示工资的总额；同时按部门，统计工资总额；统计所有员工的工资总额。<br>如<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select deptno,job,sum(sal) from emp group by rollup(deptno,job);</span><br></pre></td></tr></table></figure>
结果：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DEPTNO JOB         SUM(SAL)</span><br><span class="line">------ --------- ----------</span><br><span class="line">    10 CLERK           4541</span><br><span class="line">    10 MANAGER         6455</span><br><span class="line">    10 PRESIDENT       9711</span><br><span class="line">    10                20707</span><br><span class="line">    20 CLERK           8235</span><br><span class="line">    20 ANALYST        12360</span><br><span class="line">    20 MANAGER       7032.5</span><br><span class="line">    20              27627.5</span><br><span class="line">    30 CLERK         4117.5</span><br><span class="line">    30 MANAGER         6895</span><br><span class="line">    30 SALESMAN       18648</span><br><span class="line">    30              29660.5</span><br><span class="line">                      77995</span><br></pre></td></tr></table></figure>
rollup就可以实现上述的效果。小计、总计的效果，可以用在报表里面。</li>
</ul>
<p>再次优化，先运行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">break on deptno skip 2</span><br></pre></td></tr></table></figure>
<p>再运行上面的代码即可。</p>
<h4 id="（10）sqlplus的报表功能"><a href="#（10）sqlplus的报表功能" class="headerlink" title="（10）sqlplus的报表功能"></a>（10）sqlplus的报表功能</h4><p>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ttitle col 15 &#x27;我的报表&#x27; col 35 sql.pno    --15表示空15列，sql.pno表示报表页码</span><br><span class="line">col deptno heading 部门号   --设置别名</span><br><span class="line">col job heading 职位</span><br><span class="line">col sum(sal) heading 工资总额</span><br><span class="line">break on deptno skip 1		--deptno只显示一次，部门间间隔一行</span><br><span class="line">```  </span><br><span class="line">结果：</span><br></pre></td></tr></table></figure>
<pre><code>          我的报表                     1
部门号 职位        工资总额
</code></pre>
<hr>
<pre><code>    10 CLERK           4541
       MANAGER         6455
       PRESIDENT       9711
                      20707

    20 CLERK           8235
       ANALYST        12360
       MANAGER       7032.5
                    27627.5


          我的报表                     2
部门号 职位        工资总额
</code></pre>
<hr>
<pre><code>    30 CLERK         4117.5
       MANAGER         6895
       SALESMAN       18648
                    29660.5

                      77995
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 3.多表查询</span><br><span class="line">#### （1）简介</span><br><span class="line">按数据库设计原则，员工表中只有部门的编号信息，部门的详细信息会存放在部门表中。</span><br><span class="line"></span><br><span class="line">什么是多表查询：就是从多个表中获取数据。</span><br><span class="line"></span><br><span class="line">前提是有一个外键约束来表示员工是哪个部门的，有个一个部门号来联结。</span><br><span class="line">#### （2）笛卡尔集</span><br><span class="line">有了它才有多表查询的存在。笛卡尔集的列数等于每张表列数的相加，行数等于每张表的行数相乘。比如`emp*dept`有六列六行。里面的每一条记录不一定都是对的。多表查询就是要从笛卡尔集中选择出正确的记录。需要一个连接条件，比如部门号相等。有了连接条件，就能避免使用笛卡尔全集。在实际运行环境下，应提供where连接条件，避免使用笛卡尔全集。连接条件至少有要连接表数-1个。</span><br><span class="line"></span><br><span class="line">创建笛卡尔集可以使用全连接：</span><br><span class="line">`FULL JOIN`</span><br><span class="line">#### （3）连接的类型</span><br><span class="line">* 等值连接</span><br><span class="line">* 不等值连接</span><br><span class="line">* 外连接</span><br><span class="line">* 自连接</span><br><span class="line">#### （4）等值连接</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>select e.empno,e.ename,e.sal,d.dname from emp e,dept d where e.deptno=d.deptno;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### （5）不等值连接</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT e.empno,e.ename,e.sal,s.grade FROM emp e,salgrade s WHERE e.sal BETWEEN s.losal AND s.hisal;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### （6）外连接</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT d.deptno 部门号,d.dname 部门名称,COUNT(e.empno) 人数 FROM emp e,dept d WHERE e.deptno=d.deptno GROUP BY d.deptno,d.dname;   –漏了一个部门</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">核心：通过外连接，把对于连接条件不成立的记录，仍然包含在最后的结果中。</span><br><span class="line"></span><br><span class="line">左外连接（`LEFT [OUTER] JOIN`）：当连接条件不成立的时候，等号左边的表仍然被包含</span><br><span class="line"></span><br><span class="line">右外连接（`RIGHT [OUTER] JOIN`）：当连接条件不成立的时候，等号右边的表仍然被包含</span><br><span class="line"></span><br><span class="line">因此上述表达式改为：</span><br><span class="line"></span><br><span class="line">改为右外连接  方法是在相反的方向的等值连接结尾加上(+),比如右外连接就是加在左边的最后。</span><br></pre></td></tr></table></figure>
<p>SELECT d.deptno 部门号,d.dname 部门名称,COUNT(e.empno) 人数 FROM emp e,dept d WHERE e.deptno(+)=d.deptno GROUP BY d.deptno,d.dname;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">或者写成：</span><br></pre></td></tr></table></figure>
<p>SELECT d.deptno 部门号,d.dname 部门名称,COUNT(e.empno) 人数 FROM emp e,dept d WHERE e.deptno right join d.deptno GROUP BY d.deptno,d.dname;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">得到结果：</span><br></pre></td></tr></table></figure>
<p>部门号 部门名称               人数</p>
<hr>
<pre><code>10 ACCOUNTING              3
40 OPERATIONS              0
20 RESEARCH                5
30 SALES                   6
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### （7）自连接</span><br><span class="line">* 作用：通过别名，将同一张表视为多张表（核心）    `INNER JOIN`</span><br><span class="line"></span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT e.ename 员工姓名,b.ename 老板姓名 FROM emp e,emp b WHERE e.mgr=b.empno;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##### 自连接存在的问题</span><br><span class="line">尽管是查询一张表，但本质上仍然是多表查询，会产生笛卡尔集。</span><br><span class="line"></span><br><span class="line">可以通过这个看笛卡尔集有多少条记录`select count(*) from emp e,emp b;`表越多，次方越多。比如员工表中有一亿条记录，如果看成三张表，就有一亿的立方的笛卡尔集，所以自连接不适合查询大表。</span><br><span class="line"></span><br><span class="line">* 所以要使用解决方法： **层次查询** （单表查询，只有在一张表时才不会查询笛卡尔集，在某些情况下可以取代自连接）。</span><br><span class="line"></span><br><span class="line">* 层次查询的原理：可以把前面的结果变成分level的一棵树。这棵树的根是没有上司的king，也就是mgr就是NULL。</span><br><span class="line">如：</span><br></pre></td></tr></table></figure>
<p>SELECT level,empno,ename,sal,mgr FROM emp CONNECT BY PRIOR empno=mgr START WITH mgr IS NULL ORDER BY 1;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 自连接的优点：结果直观。缺点：不适合操作大表。</span><br><span class="line"></span><br><span class="line">* 层次查询的优点：适合单表查询，不会产生笛卡尔集。缺点：并没有自连接那么直观。</span><br><span class="line"></span><br><span class="line">### 4.子查询</span><br><span class="line">#### （1）子查询介绍</span><br><span class="line">为什么要学习子查询：子查询可以解决不能一步求解的问题</span><br><span class="line">* 示例：查询工资比scott高的员工信息</span><br><span class="line"></span><br><span class="line">子查询的语法：其实也就是select语句的嵌套</span><br></pre></td></tr></table></figure>
<p>select select_list<br>from table<br>where expr operator<br>    (select select_list<br>    from table);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如</span><br></pre></td></tr></table></figure>
<p>select * from emp where sal &gt; (select sal from emp where ename=’SCOTT’);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### （2）子查询注意的十个问题</span><br><span class="line">* 子查询语法中的小括号</span><br><span class="line"></span><br><span class="line">语法中一定要有小括号，不然是错的。</span><br><span class="line">* 子查询的书写风格</span><br><span class="line"></span><br><span class="line">该换行的换行，该缩进的索引，可以便于阅读。</span><br><span class="line"></span><br><span class="line">* 可以使用子查询的位置：where,select,having,from</span><br><span class="line"></span><br><span class="line">select后面使用，要求一定要只返回一条记录，要是单行子查询才行，多行子查询不行。</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT empno,ename,sal,(SELECT job FROM emp WHERE empno=7839) 第四列<br>FROM emp;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在having后面使用：</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT deptno,AVG(sal)<br>FROM emp<br>GROUP BY deptno<br>HAVING AVG(sal) &gt; (SELECT MAX(sal)<br>                  FROM emp<br>        WHERE deptno=30);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">在from后面放置：</span><br><span class="line"></span><br><span class="line">非常的重要，很多问题都是在from后面方式子查询来解决的</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT * from(SELECT empno,ename,sal FROM emp);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 不可以使用子查询的位置：group by</span><br><span class="line"></span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT AVG(sal)<br>FROM emp<br>GROUP BY (SELECT deptno FROM emp);   –会报错，这里不允许出现子查询表达式</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 强调：from后面的子查询，比较特殊，比较重要</span><br><span class="line"></span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT *<br>FROM (SELECT empno,ename,sal,sal*12 annsal FROM emp);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 主查询和子查询可以不是同一张表</span><br><span class="line"></span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp WHERE deptno=<br>                  (SELECT deptno<br>        FROM dept<br>        WHERE dname=’SALES’);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">多表查询代码：</span><br></pre></td></tr></table></figure>
<p>SELECT e.*<br>FROM emp e,dept d<br>WHERE e.deptno=d.deptno AND d.dname=’SALES’;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">哪种查询方式好呢？从理论上来讲，尽量使用多表查询比较好，因为子查询需要对数据库访问两次，而多表查询只需要对数据库访问一次。但实际情况下有可能不一样，因为多表查询的笛卡尔集可能很大所以慢了。</span><br><span class="line"></span><br><span class="line">* 一般不在子查询中，使用排序；但在Top-N分析问题中，必须对子查询排序</span><br><span class="line"></span><br><span class="line">比如找到员工表中工资最高的前三名。</span><br><span class="line"></span><br><span class="line">`rownum`行号，是一个伪列，表上没有这一列，当做一些特殊操作的时候，oracle自动加上。行号需要注意的问题：行号永远按照默认的顺序生成；行号只能使用&lt;，&lt;=，不能使用&gt;或者&gt;=这样的符号。</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT ROWNUM,empno,ename,sal<br>FROM (SELECT * FROM emp ORDER BY sal DESC)<br>WHERE ROWNUM&lt;=3;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 一般先执行子查询，再执行主查询；但相关子查询例外</span><br><span class="line"></span><br><span class="line">相关子查询的表必须设定一个别名，然后把主查询的内容传入到子查询中进行查询。</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT empno,ename,sal,(SELECT AVG(sal) FROM emp WHERE deptno=e.deptno) avgsal<br>FROM emp e<br>WHERE sal &gt; (SELECT AVG(sal) FROM emp WHERE deptno=e.deptno);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">这里就把主查询e表中的部门号传入子查询中进行查询了。</span><br><span class="line">* 单行子查询只能使用单行操作符；多行子查询只能使用多行操作符</span><br><span class="line"></span><br><span class="line">##### 单行操作符：=、&gt;、&gt;=、&lt;、&lt;=、&lt;&gt;</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE job = (SELECT job FROM emp WHERE empno=7566)<br>AND sal &gt; (SELECT sal FROM emp WHERE empno=7782);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">又如</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE sal = (SELECT MIN(sal) FROM emp);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT deptno,MIN(sal)<br>FROM emp<br>GROUP BY deptno<br>HAVING MIN(sal) &gt; (SELECT MIN(sal)<br>                  FROM emp<br>        WHERE deptno=20);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">非法使用单行子查询：</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>select empno,ename from emp where sal=(select min(sal)<br>        from emp<br>        group by deptno);    –因为子查询返回了不止一行，所以是非法使用单行子查询。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">##### 多行操作符：in（等于列表中的任意一个）、any（和子查询返回的任意一个值比较）、all（和子查询返回的所有值比较）</span><br><span class="line">in：</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE deptno IN (SELECT deptno FROM dept WHERE dname=’SALES’ OR dname=’ACCOUNTING’);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">又如</span><br></pre></td></tr></table></figure>
<p>SELECT e.* FROM emp e,dept d<br>WHERE e.deptno=d.deptno AND (d.dname=’SALES’ OR d.dname=’ACCOUNTING’);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">any：</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE sal &gt; ANY(SELECT sal FROM emp WHERE deptno=30);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">等价于</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE sal &gt; (SELECT min(sal) FROM emp WHERE deptno=30);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">all：</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE sal &gt; ALL(SELECT sal FROM emp WHERE deptno=30);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">等价于：</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE sal &gt; (SELECT MAX(sal) FROM emp WHERE deptno=30);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* 注意：子查询中是null值的问题</span><br><span class="line"></span><br><span class="line">单行子查询中返回空值，要使用in之类的关键字，等于号的话永远为空。</span><br><span class="line"></span><br><span class="line">多行子查询中，如查询不是老板的员工</span><br><span class="line">如：</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE empno NOT IN (SELECT mgr FROM emp);   –会不返回结果，因为当子查询中包含空值的时候，不能使用not in，因为not in等同于不等于所有（永远为假）。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">所以修改为：</span><br></pre></td></tr></table></figure>
<p>SELECT * FROM emp<br>WHERE empno NOT IN (SELECT mgr FROM emp<br>               WHERE mgr IS NOT NULL);</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">### 5.综合示例</span><br><span class="line">#### （1）案例一</span><br><span class="line">* 分页查询显示员工信息：显示员工号，姓名，月薪</span><br><span class="line">* 每页显示四条记录</span><br><span class="line">* 显示第二页的员工</span><br><span class="line">* 按照月薪降序排列</span><br><span class="line">* 注意：rownum只能使用&lt;,&lt;=不能使用&gt;,&gt;=，因为oracle数据库是一个行式数据库，取了第一行才能取第二行，所以行号永远从1开始，所以比如rownum&gt;=5这样的条件永远为假。</span><br><span class="line"></span><br><span class="line">所以分页查询：</span><br></pre></td></tr></table></figure>
<p>SELECT r,empno,ename,sal<br>FROM(SELECT ROWNUM r,empno,ename,sal<br>from(SELECT ROWNUM,empno,ename,sal FROM emp ORDER BY sal DESC) e1<br>WHERE ROWNUM&lt;=8) e2<br>WHERE r&gt;=5;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### （2）案例二</span><br><span class="line">* 找到员工表中薪水大于本部门平均薪水的员工</span><br><span class="line"></span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT e.empno,e.ename,e.sal,d.avgsal<br>FROM emp e,(SELECT deptno,AVG(sal) avgsal FROM emp GROUP BY deptno) d<br>WHERE e.deptno=d.deptno AND e.sal&gt;d.avgsal;   –多表查询</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">如果需要查询执行计划看性能的话，则在语句前面加上`EXPLAIN PLAN FOR`</span><br><span class="line"></span><br><span class="line">执行一遍之后，运行`select * from table(dbms_xplan.display);`即可查看性能分析，看消耗的CPU的多少来判定性能的优劣。</span><br><span class="line">#### （3）案例三</span><br><span class="line">* 按部门统计员工人数，按照规定格式输入，已知员工的入职年份在80,81,82,87年之中。</span><br><span class="line">如</span><br></pre></td></tr></table></figure>
<p>SELECT COUNT(*) Total,<br>       SUM(DECODE(to_char(hiredate,’yyyy’),’1980’,1,0)) “1980”,<br>       SUM(DECODE(to_char(hiredate,’yyyy’),’1981’,1,0)) “1981”,<br>    SUM(DECODE(to_char(hiredate,’yyyy’),’1982’,1,0)) “1982”,<br>    SUM(DECODE(to_char(hiredate,’yyyy’),’1987’,1,0)) “1987”<br>FROM emp;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">使用子查询方法：</span><br></pre></td></tr></table></figure>
<p>SELECT<br>(SELECT COUNT(<em>) FROM emp) Total,<br>(SELECT COUNT(</em>) FROM emp WHERE to_char(hiredate,’yyyy’)=’1980’) “1980”,<br>(SELECT COUNT(<em>) FROM emp WHERE to_char(hiredate,’yyyy’)=’1981’) “1981”,<br>(SELECT COUNT(</em>) FROM emp WHERE to_char(hiredate,’yyyy’)=’1982’) “1982”,<br>(SELECT COUNT(*) FROM emp WHERE to_char(hiredate,’yyyy’)=’1987’) “1987”<br>FROM dual;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#### （4）练习</span><br><span class="line">新建两个表，然后按要求查到相关的内容</span><br><span class="line"></span><br><span class="line">第一个表：</span><br></pre></td></tr></table></figure>
<p>CI_ID                STU_IDS</p>
<hr>
<p>1                    1,2,3,4<br>2                    1,4</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">表结构：</span><br></pre></td></tr></table></figure>
<p>Name    Type          Nullable Default Comments </p>
<hr>
<p>CI_ID   VARCHAR2(20)<br>STU_IDS VARCHAR2(100) Y  </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">第二个表：</span><br></pre></td></tr></table></figure>
<p>STU_ID               STU_NAME</p>
<hr>
<p>1                    张三<br>2                    李四<br>3                    王五<br>4                    赵六</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">表结构：</span><br></pre></td></tr></table></figure>
<p>Name     Type         Nullable Default Comments </p>
<hr>
<p>STU_ID   VARCHAR2(20)<br>STU_NAME VARCHAR2(20) Y  </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> **提示：**</span><br><span class="line"> </span><br><span class="line">1.需要进行两个表的连接查询，为两个表都取别名</span><br><span class="line"></span><br><span class="line">2.使用instr(a,b)函数，该函数的含义为：如果字符串b在字符串a的里面，则返回的是b在a中的位置，及返回值大于0</span><br><span class="line"></span><br><span class="line">3.需要用到分组查询</span><br><span class="line"></span><br><span class="line">4.使用wm_concat(cols)函数对学生姓名用逗号进行拼接</span><br></pre></td></tr></table></figure>
<p>–结果查询语句<br>SELECT ci_id,wm_concat(stu_name) stu_name<br>FROM pm_stu,pm_ci<br>WHERE INSTR(stu_ids,stu_id)&gt;0<br>GROUP BY ci_id;</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">得到正确结果：</span><br></pre></td></tr></table></figure>
<p>CI_ID                STU_NAME</p>
<hr>
<p>1                    张三,赵六,王五,李四<br>2                    张三,赵六</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">同时学会了一个，如果在oracle中，需要实现如果表已经存在则先删除表的操作，写法为：</span><br></pre></td></tr></table></figure>
<p>–如果已经存在表则先删除表<br>DECLARE<br>  k NUMBER;<br>BEGIN<br>    select count(*) INTO k from all_tables where table_name=’PM_CI’;<br>    IF k=1 THEN<br>        execute IMMEDIATE ‘DROP TABLE pm_ci’;<br>    END IF;<br>END;<br>/</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">其中查询的表名和drop的表名变成你要检测的表名即可。</span><br><span class="line"></span><br><span class="line">=====================================================================================</span><br><span class="line"></span><br><span class="line">## PL/SQL编程基础部分</span><br><span class="line">### 1.为什么要学PL/SQL编程</span><br><span class="line">使用PLSQL语言操作Oracle数据库的效率最高。</span><br><span class="line"></span><br><span class="line">之前用sql语句是命令式的语言，但如果案例是复杂的，比如需要分条件来做不同的事情的，就需要PL/SQL效率会更高，不需要用其他的编程语言。</span><br><span class="line"></span><br><span class="line">* PL/SQL介绍</span><br><span class="line"></span><br><span class="line">全称是Procedure Language/SQL，是oracle对sql语言的过程化扩展</span><br><span class="line"></span><br><span class="line">指在SQL命令语言中增加了过程处理语句（如分支、循环等），使SQL语言具有过程处理能力。</span><br><span class="line"></span><br><span class="line">（1）是sql的扩展，支持sql语句。</span><br><span class="line"></span><br><span class="line">（2）是面向过程的语言。</span><br><span class="line">### 2.语句块通用格式</span><br></pre></td></tr></table></figure>
<p>declare<br>    –说明部分（变量说明、光标申明、例外说明）<br>begin<br>    –程序体（DML语句）<br>    dbms_output.put_line(‘Hello World’);<br>exception<br>    –例外处理语句<br>end;<br>/</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line">/    --这个正斜杠用来退出前面的代码编写并且执行语句</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--查看程序包的结构</span><br><span class="line">desc 程序包名字</span><br></pre></td></tr></table></figure>
<h3 id="3-打开输出开关"><a href="#3-打开输出开关" class="headerlink" title="3.打开输出开关"></a>3.打开输出开关</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set serveroutput on</span><br></pre></td></tr></table></figure>
<h3 id="4-不同数据库中SQL扩展"><a href="#4-不同数据库中SQL扩展" class="headerlink" title="4.不同数据库中SQL扩展"></a>4.不同数据库中SQL扩展</h3><ul>
<li>Oracle：PL/SQL</li>
<li>DB2：SQL/PL</li>
<li>SQL Server：Transac-SQL(T-SQL)<h3 id="5-PL-SQL的说明部分"><a href="#5-PL-SQL的说明部分" class="headerlink" title="5. PL/SQL的说明部分"></a>5. PL/SQL的说明部分</h3></li>
<li>定义基本变量<br>类型：char，varchar2，date，number，boolean，long</li>
</ul>
<p>举例：名字在片面，变量是在后面，:=为赋值符号不是单=号</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var1      char(15);</span><br><span class="line">married   bollean := true;</span><br><span class="line">psal      number(7,2);  --说明有两位小数</span><br></pre></td></tr></table></figure>
<ul>
<li>定义引用型变量<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">my_name emp.ename%type;  --引用ename的类型，ename是啥类型变量就是啥类型</span><br></pre></td></tr></table></figure>
第二种赋值方式：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select ename,sal into pename,psal from emp where empno=7839;</span><br></pre></td></tr></table></figure>
这里的into就可以赋值，是一一对应的。</li>
<li>定义记录型变量<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">emp_rec emp%rowtype;   </span><br><span class="line">--取表中一行的类型，作为变量的类型，可以理解为数组，如果需要取用到列里面的某一行，就像如下写法：</span><br><span class="line">emp_rec.ename := &#x27;ADAMS&#x27;;   --ename是列的名字。</span><br></pre></td></tr></table></figure>
<h3 id="6-PL-SQL的流程控制语句"><a href="#6-PL-SQL的流程控制语句" class="headerlink" title="6. PL/SQL的流程控制语句"></a>6. PL/SQL的流程控制语句</h3><h4 id="（1）if语句："><a href="#（1）if语句：" class="headerlink" title="（1）if语句："></a>（1）if语句：</h4>情况一<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if 条件 then 语句1;</span><br><span class="line">语句2;</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>
情况二<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if 条件 then 语句序列1;</span><br><span class="line">else 语句序列2;</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>
情况三<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">if 条件 then 语句;</span><br><span class="line">elsif 语句 then 语句;    --特别注意下elsif</span><br><span class="line">else 语句;</span><br><span class="line">end if;</span><br></pre></td></tr></table></figure>
<h4 id="（2）while循环："><a href="#（2）while循环：" class="headerlink" title="（2）while循环："></a>（2）while循环：</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while total &lt;= 25000 loop</span><br><span class="line">...</span><br><span class="line">total := total + salary;</span><br><span class="line">end loop;</span><br></pre></td></tr></table></figure>
<h4 id="（3）loop循环："><a href="#（3）loop循环：" class="headerlink" title="（3）loop循环："></a>（3）loop循环：</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--在控制光标的时候比较简单</span><br><span class="line">loop</span><br><span class="line">exit[when 条件];</span><br><span class="line">......</span><br><span class="line">end loop;</span><br></pre></td></tr></table></figure>
<h4 id="（4）for循环："><a href="#（4）for循环：" class="headerlink" title="（4）for循环："></a>（4）for循环：</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for i in 1..3 loop   --表示连续区间用这种写法</span><br><span class="line">语句序列;</span><br><span class="line">end loop;</span><br></pre></td></tr></table></figure>
<h3 id="7-光标"><a href="#7-光标" class="headerlink" title="7.光标"></a>7.光标</h3><h4 id="（1）光标的引入背景"><a href="#（1）光标的引入背景" class="headerlink" title="（1）光标的引入背景"></a>（1）光标的引入背景</h4>select如果返回的结果有多行的话就会出错，所以需要引入光标，光标cursor就是一个结果集。也叫游标。<h4 id="（2）光标的语法"><a href="#（2）光标的语法" class="headerlink" title="（2）光标的语法"></a>（2）光标的语法</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cursor 光标名 [(参数名 数据类型[,参数名 数据类型]...)] is select 语句;</span><br></pre></td></tr></table></figure>
如 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cursor c1 is select ename from emp;</span><br></pre></td></tr></table></figure>
此外，光标是可以带参数的。<h4 id="（3）光标的一些操作"><a href="#（3）光标的一些操作" class="headerlink" title="（3）光标的一些操作"></a>（3）光标的一些操作</h4></li>
<li>打开光标：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">open c1;(打开光标执行查询)</span><br></pre></td></tr></table></figure></li>
<li>关闭光标：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">close c1;(关闭游标释放资源)</span><br></pre></td></tr></table></figure></li>
<li>取一行光标的值：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fetch c1 into pename; (取一行到变量中)</span><br></pre></td></tr></table></figure></li>
<li>fetch的作用：</li>
</ul>
<p>（1）把当前指针指向的记录返回；</p>
<p>（2）将指针指向下一条记录。</p>
<h4 id="（4）光标的属性"><a href="#（4）光标的属性" class="headerlink" title="（4）光标的属性"></a>（4）光标的属性</h4><ul>
<li><p>%found(光标能取到内容返回true，否则false)    </p>
</li>
<li><p>%notfound（与前者相反）</p>
</li>
<li><p>%isopen：判断光标是否打开</p>
</li>
<li><p>%rowcount：影响的行数，不是总行数，比如光标取走了10行的数据，那么这个值就是10</p>
<h4 id="（5）光标的限制"><a href="#（5）光标的限制" class="headerlink" title="（5）光标的限制"></a>（5）光标的限制</h4><p>默认情况下，oracle数据库只允许在同一个会话中打开300个光标</p>
</li>
<li><p>修改光标数的限制：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alter system set open_cursors=400 scope=both; </span><br></pre></td></tr></table></figure>
<p>scope是范围，取值有三个：both, memory（只更改当前实例）, spfile（只更改参数文件，数据库需要重启）</p>
<h3 id="8-例外"><a href="#8-例外" class="headerlink" title="8.例外"></a>8.例外</h3><h4 id="（1）例外的概念"><a href="#（1）例外的概念" class="headerlink" title="（1）例外的概念"></a>（1）例外的概念</h4><p>例外是程序设计语言提供的一种功能，用来增强程序的健壮性和容错性。</p>
<h4 id="（2）例外的分类"><a href="#（2）例外的分类" class="headerlink" title="（2）例外的分类"></a>（2）例外的分类</h4></li>
<li><p>系统例外</p>
</li>
<li><p>自定义例外</p>
<h4 id="（3）系统例外"><a href="#（3）系统例外" class="headerlink" title="（3）系统例外"></a>（3）系统例外</h4></li>
<li><p>no_data_found   没有找到数据，select语句没有找到结果的时候</p>
</li>
<li><p>too_many_rows   select…into语句匹配多个行</p>
</li>
<li><p>zero_divide     被零除</p>
</li>
<li><p>value_error     算术或转换错误</p>
</li>
<li><p>timeout_on_resource   在等待资源时发生超时（分布式数据库的访问会用到）</p>
<h4 id="（4）自定义例外"><a href="#（4）自定义例外" class="headerlink" title="（4）自定义例外"></a>（4）自定义例外</h4><p>定义变量，类型是exception</p>
</li>
</ul>
<p>使用raise关键字抛出自定义例外</p>
<h3 id="9-程序设计方法"><a href="#9-程序设计方法" class="headerlink" title="9.程序设计方法"></a>9.程序设计方法</h3><p>瀑布模型：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">需求分析</span><br><span class="line">	设计1.概要设计2.详细设计</span><br><span class="line">		编码Coding</span><br><span class="line">			测试Testing</span><br><span class="line">				上线</span><br></pre></td></tr></table></figure>
<p>以上步骤就像水流一下，最忌讳一上来就编码。</p>
<p>想明白SQL语句、变量。</p>
<p>变量：1.初始值是多少2.最终值如何得到</p>
<h3 id="10-其他小技巧："><a href="#10-其他小技巧：" class="headerlink" title="10.其他小技巧："></a>10.其他小技巧：</h3><ul>
<li>使用||符号来连接文本字符串。</li>
<li>–表示单行注释，/*   */表示多行输入</li>
<li>单个等于号表示判断。</li>
<li>plsql中大小写不敏感。</li>
<li>then语句相当于一个大括号，后面的语句可以一起被处理，比如如下写法：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">when zero_divide then dbms_output.put_line(&#x27;1:0不能做被除数&#x27;);</span><br><span class="line">                          dbms_output.put_line(&#x27;2:0不能做被除数&#x27;);</span><br></pre></td></tr></table></figure>
这里两句话都会被打印出来。</li>
<li>把握一个原则：能不操作数据库就不操作数据库，比单单加减乘除的计算慢。</li>
</ul>
<p>=====================================================================================</p>
<h2 id="Oracle触发器部分"><a href="#Oracle触发器部分" class="headerlink" title="Oracle触发器部分"></a>Oracle触发器部分</h2><h3 id="1-触发器的概念"><a href="#1-触发器的概念" class="headerlink" title="1.触发器的概念"></a>1.触发器的概念</h3><p>触发器是一个特殊的存储过程。是一个与表相关联的、存储的PL/SQL程序。</p>
<p>作用：每当一个特定的数据操作语句（insert、update、delete，注意没有select）在指定的表上发出时，oracle自动地执行触发器中定义的语句序列。</p>
<h3 id="2-触发器的类型"><a href="#2-触发器的类型" class="headerlink" title="2.触发器的类型"></a>2.触发器的类型</h3><ul>
<li>语句级的触发器</li>
</ul>
<p>在指定的操作语句操作之前或之后执行一次，不管这条语句影响了多少行。</p>
<p>语句级触发器针对表，只会触发一次</p>
<ul>
<li>行级的触发器</li>
</ul>
<p>触发语句作用的每一条记录都被触发。在行级触发器中使用:old和:new伪记录变量，识别值的状态。如果有for each row就表示行级触发器。<br>如</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">insert into emp10 select * from emp where deptno=10;</span><br></pre></td></tr></table></figure>
<p>会查出3条记录。</p>
<p>行级触发器针对行，有多少条记录就触发多少次。</p>
<h3 id="3-第一个触发器"><a href="#3-第一个触发器" class="headerlink" title="3.第一个触发器"></a>3.第一个触发器</h3><p>每当成功插入新员工后，自动打印一句话，”成功插入新员工”。单词trigger</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create trigger saynewemp</span><br><span class="line">after insert</span><br><span class="line">on emp</span><br><span class="line">declare</span><br><span class="line">begin</span><br><span class="line">	dbms_output.put_line(&#x27;成功插入新员工&#x27;);</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>
<h3 id="4-触发器的具体应用场景"><a href="#4-触发器的具体应用场景" class="headerlink" title="4.触发器的具体应用场景"></a>4.触发器的具体应用场景</h3><p>（1）复杂的安全性检查   –比如周末不允许操作数据库</p>
<p>（2）数据的确认   –涨后的工资大于涨前的工资</p>
<p>（3）数据库审计   –跟踪表上所做的数据操作，什么时间什么人操作了什么数据，操作的人是什么。基于值的审计</p>
<p>（4）数据的备份和同步   –异地备份，把主数据的数据自动同步到备数据库中</p>
<h3 id="5-创建触发器的语法"><a href="#5-创建触发器的语法" class="headerlink" title="5.创建触发器的语法"></a>5.创建触发器的语法</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create [or replace] trigger 触发器名</span><br><span class="line">&#123;before|after&#125;</span><br><span class="line">&#123;delete|insert|update [of 列名]&#125;</span><br><span class="line">on 表名</span><br><span class="line">[for each row [when 条件]]</span><br><span class="line">plsql块</span><br></pre></td></tr></table></figure>
<h3 id="6-触发器的案例"><a href="#6-触发器的案例" class="headerlink" title="6.触发器的案例"></a>6.触发器的案例</h3><ul>
<li>触发器案例一：禁止在非工作时间插入数据</li>
<li>触发器案例二：涨工资不能越涨越少    <code>:old</code>和<code>:new</code>的使用要注意。</li>
<li>触发器案例三：创建基于值的触发器</li>
<li>触发器案例四：数据库的备份和同步    –利用触发器实现数据的同步备份，多用于异地分布式数据库<h1 id="还能使用快照备份，快照备份是异步备份，而触发器是同步备份，没有延时的"><a href="#还能使用快照备份，快照备份是异步备份，而触发器是同步备份，没有延时的" class="headerlink" title="还能使用快照备份，快照备份是异步备份，而触发器是同步备份，没有延时的"></a>还能使用快照备份，快照备份是异步备份，而触发器是同步备份，没有延时的</h1><h2 id="Oracle存储过程部分"><a href="#Oracle存储过程部分" class="headerlink" title="Oracle存储过程部分"></a>Oracle存储过程部分</h2><h3 id="1-存储过程模板公式"><a href="#1-存储过程模板公式" class="headerlink" title="1.存储过程模板公式"></a>1.存储过程模板公式</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create [or replace] PROCEDURE 过程名(参数列表)</span><br><span class="line">AS</span><br><span class="line">PLSQL子程序体; （关键字可以小写）（如果不传参，则参数列表的小括号也可以省略）</span><br></pre></td></tr></table></figure>
这个PLSQL子程序体;一般为：<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">begin</span><br><span class="line">	代码...</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure></li>
<li><em>如果写的是存储函数，那么这里的PROCEDURE需要改成FUNCTION，而且必须在参数列表和AS之间添加一句：<code>RETURN 函数值类型</code>。而且需要在子程序体需要返回的时候写<code>return 返回值</code>。</em>* </li>
</ul>
<p>写好之后先编译，然后调用、运行。</p>
<p>as后面跟的是说明部分，相当于declare。</p>
<p>as也可以写成is。</p>
<p>调用方式有两种：</p>
<p>（1）<code>exec 过程名();</code></p>
<p>（2）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">begin</span><br><span class="line">    调用语句;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>
<h3 id="2-入参"><a href="#2-入参" class="headerlink" title="2.入参"></a>2.入参</h3><p>在参数列表中，如果是输入参数，可以写入eno in number，in是关键，in前面是变量名，后面是变量类型。</p>
<h3 id="3-出参"><a href="#3-出参" class="headerlink" title="3.出参"></a>3.出参</h3><p>如果是输出参数，写eno out number，out是关键，out前面是变量名，后面是变量类型。</p>
<p>存储过程和存储函数都可以有out参数。</p>
<p>他们都可以有多个out参数。</p>
<p>存储过程可以通过out参数来实现返回值。</p>
<h3 id="4-小例子"><a href="#4-小例子" class="headerlink" title="4.小例子"></a>4.小例子</h3><p>查询某个员工姓名、月薪和职位</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create or replace procedure queryempinform(eno in number,</span><br><span class="line">			pename out varchar2,</span><br><span class="line">			psal   out number,</span><br><span class="line">			pjob   out varchar2)</span><br><span class="line">as</span><br><span class="line">begin</span><br><span class="line">	--得到该员工的姓名、月薪和职位</span><br><span class="line">	select ename,sal,empjob into pename,psal,pjob from emp where empno=eno;</span><br><span class="line">end;</span><br><span class="line">/</span><br></pre></td></tr></table></figure>
<h3 id="5-在out参数中使用光标案例"><a href="#5-在out参数中使用光标案例" class="headerlink" title="5.在out参数中使用光标案例"></a>5.在out参数中使用光标案例</h3><p>案例：查询某个部门中所有员工的所有信息。</p>
<p>包头（负责声明包中的结构）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE OR REPLACE PACKAGE MYPACKAGE AS</span><br><span class="line">	type empcursor is ref cursor;</span><br><span class="line">	procedure queryEmpList(dno in number,empList out empcursor);</span><br><span class="line">END MYPACKAGE;</span><br></pre></td></tr></table></figure>
<p>注意：包头中也可以不定义存储过程，只定义光标那一行。</p>
<p>包体（负责写需要实现包头中声明的所有方法）：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE OR REPLACE PACKAGE BODY MYPACKAGE AS</span><br><span class="line">	procedure queryEmpList(dno in number,empList out empcursor) AS</span><br><span class="line">	BEGIN</span><br><span class="line">		--打开光标类型（是一个集合，意味着可以返回许多信息的集合）</span><br><span class="line">		open empList for select * from emp where deptno=dno;</span><br><span class="line">	END queryEmpList;</span><br><span class="line">END MYPACKAGE;</span><br></pre></td></tr></table></figure>
<p>注意：包体里面的存储过程也可以不写在包体内部也可以一样调用包头中定义的光标。</p>
<h3 id="6-其他小知识点"><a href="#6-其他小知识点" class="headerlink" title="6.其他小知识点"></a>6.其他小知识点</h3><ul>
<li>参数列表可以换行，也可以在关键字之间多加空格。</li>
<li>如果是没有参数的就是存储过程，如果有参数就是存储函数。存储函数可以有一个返回值，可以用return子句进行返回。</li>
<li>我们的原则是，如果只需要一个返回值，则用存储函数。如果没有返回值，用存储过程，如果需要有多个返回值，则使用存储过程，在参数中使用out参数。</li>
<li>单行注释使用“–注释内容”，多行注释使用“/* 注释内容 */”。</li>
<li>调试的时候授予权限：</li>
</ul>
<p>哪个权限没有就到sqlplus输入如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">grant 要调的权限（中间用逗号分隔） to 用户名;</span><br></pre></td></tr></table></figure>
<ul>
<li><h1 id="如果在计算中可能会有空值的话需要使用nvl预空函数。"><a href="#如果在计算中可能会有空值的话需要使用nvl预空函数。" class="headerlink" title="如果在计算中可能会有空值的话需要使用nvl预空函数。"></a>如果在计算中可能会有空值的话需要使用nvl预空函数。</h1><h2 id="其他独立知识点"><a href="#其他独立知识点" class="headerlink" title="其他独立知识点"></a>其他独立知识点</h2>一些不知道插进过去的哪些笔记的笔记就放在这里吧~<h3 id="简单EXISTS和-NOT-EXISTS讲解和案例"><a href="#简单EXISTS和-NOT-EXISTS讲解和案例" class="headerlink" title="简单EXISTS和 NOT EXISTS讲解和案例"></a>简单EXISTS和 NOT EXISTS讲解和案例</h3>以<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from A where exists(select * from B where A.a=B.a)</span><br></pre></td></tr></table></figure>
为例,<br>exists表示,对于A中的每一个记录,如果,在表B中有记录,其属性a的值与表A这个记录的属性a的值相同,则表A的这个记录是符合条件的记录, </li>
</ul>
<p>如果是NOT exists,则表示如果表B中没有记录能与表A这个记录连接,则表A的这个记录是符合条件的记录。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:978252321@qq.com" rel="external nofollow noreferrer">传礼</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://iwangchuanli.github.io/posts/43893.html">https://iwangchuanli.github.io/posts/43893.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://iwangchuanli.github.io" target="_blank">传礼</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img22_700Zcx.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/34458.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img8_1MHlve.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Oracle 删除重复数据只留一条</div></div></a></div><div class="next-post pull-right"><a href="/posts/43465.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img39_3NMH7S.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Oracle 数据泵</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Nice to meet you ~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Oracle%E6%95%B0%E6%8D%AE%E5%BA%93%E9%80%9F%E6%9F%A5%E7%9F%A5%E8%AF%86%E6%96%87%E6%A1%A3"><span class="toc-number">1.</span> <span class="toc-text">Oracle数据库速查知识文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">项目介绍</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86"><span class="toc-number">1.1.</span> <span class="toc-text">SQL基础部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85%E5%A5%BD%E4%B9%8B%E5%90%8E%E5%8F%AF%E4%BB%A5%E7%99%BB%E5%BD%95%E7%B3%BB%E7%BB%9F%E8%B4%A6%E6%88%B7"><span class="toc-number">1.1.2.</span> <span class="toc-text">2.安装好之后可以登录系统账户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%94%A8%E6%88%B7%E4%B8%8E%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.3.</span> <span class="toc-text">3.用户与表空间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8"><span class="toc-number">1.1.4.</span> <span class="toc-text">4.数据字典</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.4.1.</span> <span class="toc-text">（1）数据字典介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8dba-users"><span class="toc-number">1.1.4.2.</span> <span class="toc-text">（2）查看用户的数据字典dba_users</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8dba-data-files%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6%E7%9A%84"><span class="toc-number">1.1.4.3.</span> <span class="toc-text">（3）数据字典dba_data_files，查看数据文件的</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%A6%82%E4%BD%95%E5%90%AF%E7%94%A8scott%E7%94%A8%E6%88%B7"><span class="toc-number">1.1.5.</span> <span class="toc-text">5.如何启用scott用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.6.</span> <span class="toc-text">6.表空间</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%A1%A8%E7%A9%BA%E9%97%B4%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.6.1.</span> <span class="toc-text">（1）表空间介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E7%9A%84%E8%A1%A8%E7%A9%BA%E9%97%B4%EF%BC%9F"><span class="toc-number">1.1.6.2.</span> <span class="toc-text">（2）如何查看用户的表空间？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E7%94%A8%E6%88%B7%E7%9A%84%E9%BB%98%E8%AE%A4%E6%88%96%E8%80%85%E4%B8%B4%E6%97%B6%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.6.3.</span> <span class="toc-text">（3）如何设置用户的默认或者临时表空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.6.4.</span> <span class="toc-text">（4）创建表空间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">1.1.6.5.</span> <span class="toc-text">（5）修改表空间的状态</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9C%A8%E7%BA%BF%E7%A6%BB%E7%BA%BF%E7%8A%B6%E6%80%81"><span class="toc-number">1.1.6.5.1.</span> <span class="toc-text">设置在线离线状态</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%8F%AA%E8%AF%BB%E6%88%96%E5%8F%AF%E8%AF%BB%E5%86%99%E7%8A%B6%E6%80%81%EF%BC%8C%E4%B8%80%E8%88%AC%E6%98%AFread-write%E5%8F%AF%E8%AF%BB%E5%86%99%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">1.1.6.5.2.</span> <span class="toc-text">设置只读或可读写状态，一般是read write可读写的状态</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E5%A2%9E%E5%8A%A0%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.6.6.</span> <span class="toc-text">（6）增加数据文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.1.6.7.</span> <span class="toc-text">（7）删除数据文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E5%88%A0%E9%99%A4%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="toc-number">1.1.6.8.</span> <span class="toc-text">（8）删除表空间</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">1.1.7.</span> <span class="toc-text">7.数据表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E8%A1%A8%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.7.1.</span> <span class="toc-text">（1）表的介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.7.2.</span> <span class="toc-text">（2）表中的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="toc-number">1.1.7.2.1.</span> <span class="toc-text">字符型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%9E%8B"><span class="toc-number">1.1.7.2.2.</span> <span class="toc-text">数值型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%9E%8B"><span class="toc-number">1.1.7.2.3.</span> <span class="toc-text">日期型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.7.2.4.</span> <span class="toc-text">其他类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%A6%82%E4%BD%95%E7%AE%A1%E7%90%86%E8%A1%A8"><span class="toc-number">1.1.7.3.</span> <span class="toc-text">（3）如何管理表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%EF%BC%9A"><span class="toc-number">1.1.7.3.1.</span> <span class="toc-text">创建表：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%A6%82%E4%BD%95%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.7.4.</span> <span class="toc-text">（4）如何修改表的结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5"><span class="toc-number">1.1.7.4.1.</span> <span class="toc-text">添加字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E5%AD%97%E6%AE%B5%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.7.4.2.</span> <span class="toc-text">更改字段数据类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="toc-number">1.1.7.4.3.</span> <span class="toc-text">删除字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5%E5%90%8D"><span class="toc-number">1.1.7.4.4.</span> <span class="toc-text">修改字段名</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">1.1.7.4.5.</span> <span class="toc-text">修改表名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E5%88%A0%E9%99%A4%E8%A1%A8"><span class="toc-number">1.1.7.5.</span> <span class="toc-text">（5）删除表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E6%93%8D%E4%BD%9C%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.6.</span> <span class="toc-text">（6）操作表中的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.6.1.</span> <span class="toc-text">添加数据</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E8%AE%BE%E7%BD%AE%E6%9F%90%E5%AD%97%E6%AE%B5%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">1.1.7.7.</span> <span class="toc-text">（7）设置某字段的默认值</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.1.7.7.1.</span> <span class="toc-text">创建表时添加</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E5%A4%8D%E5%88%B6%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.8.</span> <span class="toc-text">（8）复制表数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%BB%BA%E8%A1%A8%E6%97%B6%E5%A4%8D%E5%88%B6"><span class="toc-number">1.1.7.8.1.</span> <span class="toc-text">在建表时复制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%83%A8%E5%88%86%E5%AD%97%E6%AE%B5%E5%A4%8D%E5%88%B6%E5%A6%82"><span class="toc-number">1.1.7.8.2.</span> <span class="toc-text">部分字段复制如</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E6%B7%BB%E5%8A%A0%E6%97%B6%E5%A4%8D%E5%88%B6"><span class="toc-number">1.1.7.8.3.</span> <span class="toc-text">在添加时复制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%889%EF%BC%89%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.9.</span> <span class="toc-text">（9）修改表的数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E6%9D%A1%E4%BB%B6%E6%9B%B4%E6%96%B0%EF%BC%9A"><span class="toc-number">1.1.7.9.1.</span> <span class="toc-text">无条件更新：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%9B%B4%E6%96%B0%EF%BC%9A"><span class="toc-number">1.1.7.9.2.</span> <span class="toc-text">有条件的更新：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8810%EF%BC%89%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.10.</span> <span class="toc-text">（10）删除数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AA%E8%83%BD%E4%BB%A5%E8%A1%8C%E4%B8%BA%E5%8D%95%E4%BD%8D%E6%9D%A5%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.7.10.1.</span> <span class="toc-text">只能以行为单位来删除数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A0%E6%9D%A1%E4%BB%B6%E5%88%A0%E9%99%A4"><span class="toc-number">1.1.7.10.2.</span> <span class="toc-text">无条件删除</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">1.1.7.10.3.</span> <span class="toc-text">有条件的删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.8.</span> <span class="toc-text">8.约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.8.1.</span> <span class="toc-text">（1）约束的介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BA%A6%E6%9D%9F%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">1.1.8.2.</span> <span class="toc-text">（2）约束的种类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.8.3.</span> <span class="toc-text">（3）非空约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.8.3.1.</span> <span class="toc-text">在创建表时设置非空约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.8.3.2.</span> <span class="toc-text">在修改表时添加非空约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E5%8E%BB%E9%99%A4%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.8.3.3.</span> <span class="toc-text">在修改表时去除非空约束：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.9.</span> <span class="toc-text">（4）主键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.0.1.</span> <span class="toc-text">在创建表时设置主键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.0.2.</span> <span class="toc-text">在修改表时添加主键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%90%8D%E7%A7%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%BF%AE%E6%94%B9%E4%BB%BB%E4%BD%95%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%90%8D%E5%AD%97"><span class="toc-number">1.1.9.0.3.</span> <span class="toc-text">更改约束的名称，可以修改任何约束的名字</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.0.4.</span> <span class="toc-text">删除主键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%98%AF%E5%AE%8C%E5%85%A8%E5%88%A0%E9%99%A4%EF%BC%9A"><span class="toc-number">1.1.9.0.5.</span> <span class="toc-text">如果是完全删除：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%98%E6%9C%89%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.1.9.0.6.</span> <span class="toc-text">还有一种方法：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.9.1.</span> <span class="toc-text">（5）外键约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E8%AE%BE%E7%BD%AE%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.1.1.</span> <span class="toc-text">在创建表的时候设置外键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E5%88%9B%E5%BB%BA%E4%B8%BB%E8%A1%A8%EF%BC%9A"><span class="toc-number">1.1.9.1.2.</span> <span class="toc-text">如创建主表：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%BB%8E%E8%A1%A8%EF%BC%9A"><span class="toc-number">1.1.9.1.3.</span> <span class="toc-text">创建从表：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%84%B6%E5%90%8E%E7%BB%99%E4%B8%BB%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-number">1.1.9.1.4.</span> <span class="toc-text">然后给主表插入数据：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E8%BF%99%E6%A0%B7%E7%BB%99%E4%BB%8E%E8%A1%A8%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%9A"><span class="toc-number">1.1.9.1.5.</span> <span class="toc-text">如果这样给从表插入数据：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E8%AE%BE%E7%BD%AE%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A-1"><span class="toc-number">1.1.9.1.6.</span> <span class="toc-text">在创建表的时候设置外键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E6%B7%BB%E5%8A%A0%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4%EF%BC%9A"><span class="toc-number">1.1.9.1.7.</span> <span class="toc-text">如果添加级联删除：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.1.8.</span> <span class="toc-text">在修改表时添加外键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.9.1.9.</span> <span class="toc-text">删除外键约束</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A6%81%E7%94%A8%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.1.10.</span> <span class="toc-text">禁用外键约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BD%BB%E5%BA%95%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.1.11.</span> <span class="toc-text">彻底删除外键约束：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.9.2.</span> <span class="toc-text">（6）唯一约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.2.1.</span> <span class="toc-text">在创建表时设置唯一约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E8%A1%A8%E7%BA%A7%E8%AE%BE%E7%BD%AE%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.2.2.</span> <span class="toc-text">在表级设置唯一约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.2.3.</span> <span class="toc-text">在修改表时添加唯一约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.2.4.</span> <span class="toc-text">删除唯一约束：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.9.3.</span> <span class="toc-text">（7）检查约束</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E8%AE%BE%E7%BD%AE%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.3.1.</span> <span class="toc-text">在创建表时设置检查约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E8%A1%A8%E7%BA%A7%E8%AE%BE%E7%BD%AE%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.3.2.</span> <span class="toc-text">在表级设置检查约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.3.3.</span> <span class="toc-text">在修改表时添加检查约束：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%A3%80%E6%9F%A5%E7%BA%A6%E6%9D%9F%EF%BC%9A"><span class="toc-number">1.1.9.3.4.</span> <span class="toc-text">删除检查约束：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E6%80%BB%E7%BB%93%E4%BA%94%E4%B8%AA%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.1.9.4.</span> <span class="toc-text">（8）总结五个约束</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.10.</span> <span class="toc-text">9.基本查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%9F%A5%E8%AF%A2%E5%9F%BA%E6%9C%AC%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.1.10.1.</span> <span class="toc-text">（1）查询基本语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%9C%A8SQL-PLUS%E4%B8%AD%E8%AE%BE%E7%BD%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.1.10.2.</span> <span class="toc-text">（2）在SQL*PLUS中设置格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%9F%A5%E8%AF%A2%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5"><span class="toc-number">1.1.10.3.</span> <span class="toc-text">（3）查询表中的所有字段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E7%BB%99%E5%AD%97%E6%AE%B5%E8%AE%BE%E7%BD%AE%E5%88%AB%E5%90%8D"><span class="toc-number">1.1.10.4.</span> <span class="toc-text">（4）给字段设置别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.1.10.5.</span> <span class="toc-text">（5）运算符和表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8select%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.1.10.5.1.</span> <span class="toc-text">在select语句中使用运算符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E5%B8%A6%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.10.6.</span> <span class="toc-text">（6）带条件的查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.10.7.</span> <span class="toc-text">（7）模糊查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.1.10.8.</span> <span class="toc-text">（8）范围查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%889%EF%BC%89%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E6%8E%92%E5%BA%8F"><span class="toc-number">1.1.10.9.</span> <span class="toc-text">（9）对查询结果排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8810%EF%BC%89case%E2%80%A6when%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.1.10.10.</span> <span class="toc-text">（10）case…when语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8811%EF%BC%89decode%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.10.11.</span> <span class="toc-text">（11）decode函数的使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%85%B6%E4%BB%96%E4%B8%80%E4%BA%9B%E5%AE%9E%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.11.</span> <span class="toc-text">10.其他一些实用命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle%E5%87%BD%E6%95%B0%E9%83%A8%E5%88%86"><span class="toc-number">1.2.</span> <span class="toc-text">Oracle函数部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.函数的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.函数的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.</span> <span class="toc-text">3.数值函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B%E8%88%8D%E4%BA%94%E5%85%A5"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">四舍五入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%96%E6%95%B4%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">取整函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E8%AE%A1%E7%AE%97"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">常用计算</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89%E8%A7%92%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">三角函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%AD%97%E7%AC%A6%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.</span> <span class="toc-text">4.字符函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E5%86%99%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">大小写转换函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%90%E5%AD%97%E7%AC%A6"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">获取子字符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">获取字符串长度函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.4.</span> <span class="toc-text">字符串连接函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E5%AD%90%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.4.5.</span> <span class="toc-text">去除子串函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.5.</span> <span class="toc-text">5.日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">系统时间</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">日期操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.6.</span> <span class="toc-text">6.转换函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%B8%80%E4%BA%9B%E8%AF%BE%E5%A0%82%E6%A1%88%E4%BE%8B"><span class="toc-number">1.2.7.</span> <span class="toc-text">7.一些课堂案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%9F%A5%E8%AF%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.7.1.</span> <span class="toc-text">在查询中使用函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle%E9%AB%98%E7%BA%A7%E6%9F%A5%E8%AF%A2%E9%83%A8%E5%88%86"><span class="toc-number">1.3.</span> <span class="toc-text">Oracle高级查询部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%AE%80%E4%BB%8B-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.3.2.</span> <span class="toc-text">2.分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">（1）什么是分组函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">（2）常见的分组函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#avg-%E6%B1%82%E5%B9%B3%E5%9D%87%E5%80%BC-%E5%92%8C-sum-%E6%B1%82%E5%92%8C"><span class="toc-number">1.3.2.2.1.</span> <span class="toc-text">avg 求平均值  和  sum 求和</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#min-%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">1.3.2.2.2.</span> <span class="toc-text">min 最小值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#max-%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-number">1.3.2.2.3.</span> <span class="toc-text">max 最大值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#count-%E6%B1%82%E4%B8%AA%E6%95%B0"><span class="toc-number">1.3.2.2.4.</span> <span class="toc-text">count 求个数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#wm-concat-%E8%A1%8C%E8%BD%AC%E5%88%97"><span class="toc-number">1.3.2.2.5.</span> <span class="toc-text">wm_concat 行转列</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%E4%B8%8E%E7%A9%BA%E5%80%BC"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">（3）分组函数与空值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%88%86%E7%BB%84%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">（4）分组数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E9%9D%9E%E6%B3%95%E4%BD%BF%E7%94%A8%E7%BB%84%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.2.5.</span> <span class="toc-text">（5）非法使用组函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%886%EF%BC%89%E8%BF%87%E6%BB%A4%E5%88%86%E7%BB%84"><span class="toc-number">1.3.2.6.</span> <span class="toc-text">（6）过滤分组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%887%EF%BC%89%E5%9C%A8%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2%E4%B8%AD%E4%BD%BF%E7%94%A8order-by%E5%AD%90%E5%8F%A5"><span class="toc-number">1.3.2.7.</span> <span class="toc-text">（7）在分组查询中使用order by子句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%888%EF%BC%89%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0%E7%9A%84%E5%B5%8C%E5%A5%97"><span class="toc-number">1.3.2.8.</span> <span class="toc-text">（8）分组函数的嵌套</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%889%EF%BC%89group-by%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%A2%9E%E5%BC%BA"><span class="toc-number">1.3.2.9.</span> <span class="toc-text">（9）group by语句的增强</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%8810%EF%BC%89sqlplus%E7%9A%84%E6%8A%A5%E8%A1%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">1.3.2.10.</span> <span class="toc-text">（10）sqlplus的报表功能</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%89%93%E5%BC%80%E8%BE%93%E5%87%BA%E5%BC%80%E5%85%B3"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.打开输出开关</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%ADSQL%E6%89%A9%E5%B1%95"><span class="toc-number">1.3.4.</span> <span class="toc-text">4.不同数据库中SQL扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-PL-SQL%E7%9A%84%E8%AF%B4%E6%98%8E%E9%83%A8%E5%88%86"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. PL&#x2F;SQL的说明部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-PL-SQL%E7%9A%84%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.3.6.</span> <span class="toc-text">6. PL&#x2F;SQL的流程控制语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89if%E8%AF%AD%E5%8F%A5%EF%BC%9A"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">（1）if语句：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89while%E5%BE%AA%E7%8E%AF%EF%BC%9A"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">（2）while循环：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89loop%E5%BE%AA%E7%8E%AF%EF%BC%9A"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">（3）loop循环：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89for%E5%BE%AA%E7%8E%AF%EF%BC%9A"><span class="toc-number">1.3.6.4.</span> <span class="toc-text">（4）for循环：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%85%89%E6%A0%87"><span class="toc-number">1.3.7.</span> <span class="toc-text">7.光标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%85%89%E6%A0%87%E7%9A%84%E5%BC%95%E5%85%A5%E8%83%8C%E6%99%AF"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">（1）光标的引入背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%85%89%E6%A0%87%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">（2）光标的语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%85%89%E6%A0%87%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">（3）光标的一些操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%85%89%E6%A0%87%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.3.7.4.</span> <span class="toc-text">（4）光标的属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E5%85%89%E6%A0%87%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-number">1.3.7.5.</span> <span class="toc-text">（5）光标的限制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BE%8B%E5%A4%96"><span class="toc-number">1.3.8.</span> <span class="toc-text">8.例外</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%BE%8B%E5%A4%96%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">（1）例外的概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%BE%8B%E5%A4%96%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.8.2.</span> <span class="toc-text">（2）例外的分类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E7%B3%BB%E7%BB%9F%E4%BE%8B%E5%A4%96"><span class="toc-number">1.3.8.3.</span> <span class="toc-text">（3）系统例外</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BE%8B%E5%A4%96"><span class="toc-number">1.3.8.4.</span> <span class="toc-text">（4）自定义例外</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.9.</span> <span class="toc-text">9.程序设计方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%85%B6%E4%BB%96%E5%B0%8F%E6%8A%80%E5%B7%A7%EF%BC%9A"><span class="toc-number">1.3.10.</span> <span class="toc-text">10.其他小技巧：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle%E8%A7%A6%E5%8F%91%E5%99%A8%E9%83%A8%E5%88%86"><span class="toc-number">1.4.</span> <span class="toc-text">Oracle触发器部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.触发器的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.2.</span> <span class="toc-text">2.触发器的类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">1.4.3.</span> <span class="toc-text">3.第一个触发器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E5%85%B7%E4%BD%93%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.触发器的具体应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E8%AF%AD%E6%B3%95"><span class="toc-number">1.4.5.</span> <span class="toc-text">5.创建触发器的语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.6.</span> <span class="toc-text">6.触发器的案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%98%E8%83%BD%E4%BD%BF%E7%94%A8%E5%BF%AB%E7%85%A7%E5%A4%87%E4%BB%BD%EF%BC%8C%E5%BF%AB%E7%85%A7%E5%A4%87%E4%BB%BD%E6%98%AF%E5%BC%82%E6%AD%A5%E5%A4%87%E4%BB%BD%EF%BC%8C%E8%80%8C%E8%A7%A6%E5%8F%91%E5%99%A8%E6%98%AF%E5%90%8C%E6%AD%A5%E5%A4%87%E4%BB%BD%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%BB%B6%E6%97%B6%E7%9A%84"><span class="toc-number">2.</span> <span class="toc-text">还能使用快照备份，快照备份是异步备份，而触发器是同步备份，没有延时的</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E9%83%A8%E5%88%86"><span class="toc-number">2.1.</span> <span class="toc-text">Oracle存储过程部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%A8%A1%E6%9D%BF%E5%85%AC%E5%BC%8F"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.存储过程模板公式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%A5%E5%8F%82"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.入参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%87%BA%E5%8F%82"><span class="toc-number">2.1.3.</span> <span class="toc-text">3.出参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B0%8F%E4%BE%8B%E5%AD%90"><span class="toc-number">2.1.4.</span> <span class="toc-text">4.小例子</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%9C%A8out%E5%8F%82%E6%95%B0%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%85%89%E6%A0%87%E6%A1%88%E4%BE%8B"><span class="toc-number">2.1.5.</span> <span class="toc-text">5.在out参数中使用光标案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%85%B6%E4%BB%96%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">2.1.6.</span> <span class="toc-text">6.其他小知识点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E5%9C%A8%E8%AE%A1%E7%AE%97%E4%B8%AD%E5%8F%AF%E8%83%BD%E4%BC%9A%E6%9C%89%E7%A9%BA%E5%80%BC%E7%9A%84%E8%AF%9D%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8nvl%E9%A2%84%E7%A9%BA%E5%87%BD%E6%95%B0%E3%80%82"><span class="toc-number">3.</span> <span class="toc-text">如果在计算中可能会有空值的话需要使用nvl预空函数。</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%8B%AC%E7%AB%8B%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">3.1.</span> <span class="toc-text">其他独立知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95EXISTS%E5%92%8C-NOT-EXISTS%E8%AE%B2%E8%A7%A3%E5%92%8C%E6%A1%88%E4%BE%8B"><span class="toc-number">3.1.1.</span> <span class="toc-text">简单EXISTS和 NOT EXISTS讲解和案例</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget ads-wrap"><a target="_blank" href="https://www.aliyun.com/activity?userCode=dpj8p3hl" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/aliyun_whuCuE.jpg" style="width:100%;height:100%;object-fit:cover;"></a></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img22_700Zcx.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By 传礼</div><div class="footer_custom_text"><p style="display:inline-flex">本网站由<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" rel="external nofollow noreferrer" target="_blank"><img style="width:60px;height:35px;" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/11/又拍云_logo5_O9kNul.png" title="又拍云"/></a>提供CDN加速/云存储服务</p><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Github托管"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'zHUfFgUbITfMSQGuSPgS2e3C-gzGzoHsz',
      appKey: 'yPXpeKX8VJxdFRPEsDaqNgEY',
      avatar: 'wavatar',
      serverURLs: 'https://zhuffgub.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true,
      master: '447d56ab3606de5490a2109d3e441219,135d837ea1033c9787dd307e59884d36'.split(','),
      friends: '5c?????bfe6rfc72a????e268ad3819c'.split(','),
      tagMeta: '博主,小伙伴,访客'.split(',')
        
    }, {"placeholder":"请输入内容～"}))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '052d9d6486112e93fa50',
      clientSecret: '6fea35bfb7a17521694a95f705683622976d2f53',
      repo: 'gitalk',
      owner: 'iwangchuanli',
      admin: ['iwangchuanli'],
      id: '0a4f5fb6a2e4c0ffc490de1335d0b947',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><div class="aplayer no-destroy" data-id="7355841544" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><script async src="/js/grayscale.js"></script><script async src="//at.alicdn.com/t/font_1885008_srfhrsykmk.js"></script><script>((window.gitter = {}).chat = {}).options = {
  disableDefaultChat: true,
};
document.addEventListener('gitter-sidecar-ready', (e) => {
  const GitterChat = e.detail.Chat
  let chat

  function initGitter () {
    chat = new GitterChat({
      room: 'wangchuangli-/community',
      activationElement: '#chat_btn'
    });
  }

  initGitter()

  if (true) {
    document.addEventListener('pjax:complete', () => {
      chat.destroy()
      initGitter()
    })
  }

})</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/4496.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img6_L358Nt.jpeg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2018-09-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/4496.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">编程系列书单推荐</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/4496.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/35693.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img33_fnRUqR.jpeg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2018-11-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/35693.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">优秀科技博客订阅</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/35693.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>