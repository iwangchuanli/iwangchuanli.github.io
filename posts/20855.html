<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Psycopg 2.9.3 documentation- python连接pgSQL | 传礼</title><meta name="keywords" content="Python"><meta name="author" content="传礼,978252321@qq.com"><meta name="copyright" content="传礼"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Psycopg 2.9.3 documentation ← Psycopg – PostgreSQL database adapter for Python  Basic module usage →  Home   InstallationPsycopg is a PostgreSQL adapter for the Python programming language. It is a wr">
<meta property="og:type" content="article">
<meta property="og:title" content="Psycopg 2.9.3 documentation- python连接pgSQL">
<meta property="og:url" content="https://iwangchuanli.github.io/posts/20855.html">
<meta property="og:site_name" content="传礼">
<meta property="og:description" content="Psycopg 2.9.3 documentation ← Psycopg – PostgreSQL database adapter for Python  Basic module usage →  Home   InstallationPsycopg is a PostgreSQL adapter for the Python programming language. It is a wr">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img10_lLsQAP.jpeg">
<meta property="article:published_time" content="2022-05-05T08:49:22.000Z">
<meta property="article:modified_time" content="2022-07-06T01:02:58.000Z">
<meta property="article:author" content="传礼">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img10_lLsQAP.jpeg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/03/favicons_uH14Fb.gif"><link rel="canonical" href="https://iwangchuanli.github.io/posts/20855"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="qKvGNFZPF9"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?39bd6e37a6e70dc030e6a043a642784e";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 传礼","link":"链接: ","source":"来源: 传礼","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Psycopg 2.9.3 documentation- python连接pgSQL',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-06 01:02:58'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.1"><link rel="alternate" href="/atom.xml" title="传礼" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/03/photo_NZBQPu.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">511</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">50</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">22</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-calendar"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 开发</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Java"><i class="fa-fw fa fa-music"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/Python"><i class="fa-fw fa fa-music"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/VUE"><i class="fa-fw fa fa-music"></i><span> VUE</span></a></li><li><a class="site-page child" href="/categories/MySQL"><i class="fa-fw fa fa-music"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/Redis"><i class="fa-fw fa fa-music"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 架构</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Spring"><i class="fa-fw fa fa-music"></i><span> Spring</span></a></li><li><a class="site-page child" href="/categories/microServeices"><i class="fa-fw fa fa-music"></i><span> 微服务</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Docker"><i class="fa-fw fa fa-music"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/Linux"><i class="fa-fw fa fa-music"></i><span> Linux</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 分享</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 图书</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa fa-commenting"></i><span> 说说</span></a></li><li><a class="site-page child" href="/todo/"><i class="fa-fw fa fa-flag"></i><span> TODO</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img10_lLsQAP.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">传礼</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 归档</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-calendar"></i><span> 时间轴</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 开发</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Java"><i class="fa-fw fa fa-music"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/Python"><i class="fa-fw fa fa-music"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/VUE"><i class="fa-fw fa fa-music"></i><span> VUE</span></a></li><li><a class="site-page child" href="/categories/MySQL"><i class="fa-fw fa fa-music"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/Redis"><i class="fa-fw fa fa-music"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 架构</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Spring"><i class="fa-fw fa fa-music"></i><span> Spring</span></a></li><li><a class="site-page child" href="/categories/microServeices"><i class="fa-fw fa fa-music"></i><span> 微服务</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/Docker"><i class="fa-fw fa fa-music"></i><span> Docker</span></a></li><li><a class="site-page child" href="/categories/Linux"><i class="fa-fw fa fa-music"></i><span> Linux</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 分享</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 项目</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/Tools"><i class="fa-fw fa fa-music"></i><span> 工具</span></a></li><li><a class="site-page child" href="/tags/guide"><i class="fa-fw fa fa-music"></i><span> 教程</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-images"></i><span> 图库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fa fa-book"></i><span> 图书</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fa fa-tags"></i><span> 我的</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa fa-commenting"></i><span> 说说</span></a></li><li><a class="site-page child" href="/todo/"><i class="fa-fw fa fa-flag"></i><span> TODO</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Psycopg 2.9.3 documentation- python连接pgSQL</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-05T08:49:22.000Z" title="发表于 2022-05-05 08:49:22">2022-05-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-06T01:02:58.000Z" title="更新于 2022-07-06 01:02:58">2022-07-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Python/">Python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">1.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>9分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Psycopg 2.9.3 documentation- python连接pgSQL"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Psycopg-2-9-3-documentation"><a href="#Psycopg-2-9-3-documentation" class="headerlink" title="Psycopg 2.9.3 documentation"></a><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/index.html">Psycopg 2.9.3 documentation</a></h1><ul>
<li><p>← <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/index.html" title="Previous document">Psycopg – PostgreSQL database adapter for Python</a></p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/usage.html" title="Next document">Basic module usage</a> →</p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/index.html">Home</a></p>
</li>
</ul>
<h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>Psycopg is a <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.postgresql.org/">PostgreSQL</a> adapter for the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.python.org/">Python</a> programming language. It is a wrapper for the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.postgresql.org/docs/current/static/libpq.html">libpq</a>, the official PostgreSQL client library.</p>
<h2 id="Quick-Install"><a href="#Quick-Install" class="headerlink" title="Quick Install"></a>Quick Install</h2><p>For most operating systems, the quickest way to install Psycopg is using the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pythonwheels.com/">wheel</a> package available on <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pypi.org/project/psycopg2-binary/">PyPI</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ pip install psycopg2-binary</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>This will install a pre-compiled binary version of the module which does not require the build or runtime prerequisites described below. Make sure to use an up-to-date version of <strong>pip</strong> (you can upgrade it using something like <code>pip install -U pip</code>).</p>
<p>You may then import the <code>psycopg2</code> package, as usual:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import psycopg2</span><br><span class="line"></span><br><span class="line"># Connect to your postgres DB</span><br><span class="line">conn = psycopg2.connect(&quot;dbname=test user=postgres&quot;)</span><br><span class="line"></span><br><span class="line"># Open a cursor to perform database operations</span><br><span class="line">cur = conn.cursor()</span><br><span class="line"></span><br><span class="line"># Execute a query</span><br><span class="line">cur.execute(&quot;SELECT * FROM my_data&quot;)</span><br><span class="line"></span><br><span class="line"># Retrieve query results</span><br><span class="line">records = cur.fetchall()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="psycopg-vs-psycopg-binary"><a href="#psycopg-vs-psycopg-binary" class="headerlink" title="psycopg vs psycopg-binary"></a>psycopg vs psycopg-binary</h3><p>The <code>psycopg2-binary</code> package is meant for beginners to start playing with Python and PostgreSQL without the need to meet the build requirements.</p>
<p>If you are the maintainer of a published package depending on <code>psycopg2</code> you shouldn’t use <code>psycopg2-binary</code> as a module dependency. <strong>For production use you are advised to use the source distribution.</strong></p>
<p>The binary packages come with their own versions of a few C libraries, among which <code>libpq</code> and <code>libssl</code>, which will be used regardless of other libraries available on the client: upgrading the system libraries will not upgrade the libraries used by <code>psycopg2</code>. Please build <code>psycopg2</code> from source if you want to maintain binary upgradeability.</p>
<p>Warning</p>
<p>The <code>psycopg2</code> wheel package comes packaged, among the others, with its own <code>libssl</code> binary. This may create conflicts with other extension modules binding with <code>libssl</code> as well, for instance with the Python <a target="_blank" rel="noopener external nofollow noreferrer" href="https://docs.python.org/3/library/ssl.html#module-ssl" title="(in Python v3.10)"><code>ssl</code></a> module: in some cases, under concurrency, the interaction between the two libraries may result in a segfault. In case of doubts you are advised to use a package built from source.</p>
<h3 id="Change-in-binary-packages-between-Psycopg-2-7-and-2-8"><a href="#Change-in-binary-packages-between-Psycopg-2-7-and-2-8" class="headerlink" title="Change in binary packages between Psycopg 2.7 and 2.8"></a>Change in binary packages between Psycopg 2.7 and 2.8</h3><p>In version 2.7.x, <strong>pip install psycopg2</strong> would have tried to install automatically the binary package of Psycopg. Because of concurrency problems binary packages have displayed, <code>psycopg2-binary</code> has become a separate package, and from 2.8 it has become the only way to install the binary package.</p>
<p>If you are using Psycopg 2.7 and you want to disable the use of wheel binary packages, relying on the system libraries available on your client, you can use the <strong>pip</strong> <a target="_blank" rel="noopener external nofollow noreferrer" href="https://pip.pypa.io/en/stable/reference/pip_install/#install-no-binary"><code>--no-binary</code> option</a>, e.g.:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ pip install --no-binary :all: psycopg2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>which can be specified in your <code>requirements.txt</code> files too, e.g. use:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psycopg2&gt;=2.7,&lt;2.8 --no-binary psycopg2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>to use the last bugfix release of the <code>psycopg2</code> 2.7 package, specifying to always compile it from source. Of course in this case you will have to meet the <a href="#build-prerequisites">build prerequisites</a>.</p>
<h2 id="Prerequisites"><a href="#Prerequisites" class="headerlink" title="Prerequisites"></a>Prerequisites</h2><p>The current <code>psycopg2</code> implementation supports:</p>
<ul>
<li>Python versions from 3.6 to 3.10</li>
<li>PostgreSQL server versions from 7.4 to 14</li>
<li>PostgreSQL client library version from 9.1</li>
</ul>
<h3 id="Build-prerequisites"><a href="#Build-prerequisites" class="headerlink" title="Build prerequisites"></a>Build prerequisites</h3><p>The build prerequisites are to be met in order to install Psycopg from source code, from a source distribution package, <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/psycopg/psycopg2">GitHub</a> or from PyPI.</p>
<p>Psycopg is a C wrapper around the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.postgresql.org/docs/current/static/libpq.html">libpq</a> PostgreSQL client library. To install it from sources you will need:</p>
<ul>
<li>A C compiler.</li>
<li>The Python header files. They are usually installed in a package such as <strong>python-dev</strong> or <strong>python3-dev</strong>. A message such as <em>error: Python.h: No such file or directory</em> is an indication that the Python headers are missing.</li>
<li>The libpq header files. They are usually installed in a package such as <strong>libpq-dev</strong>. If you get an <em>error: libpq-fe.h: No such file or directory</em> you are missing them.</li>
<li>The <strong>pg_config</strong> program: it is usually installed by the <strong>libpq-dev</strong> package but sometimes it is not in a <code>PATH</code> directory. Having it in the <code>PATH</code> greatly streamlines the installation, so try running <code>pg_config --version</code>: if it returns an error or an unexpected version number then locate the directory containing the <strong>pg_config</strong> shipped with the right libpq version (usually <code>/usr/lib/postgresql/X.Y/bin/</code>) and add it to the <code>PATH</code>:  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ export PATH=/usr/lib/postgresql/X.Y/bin/:$PATH</span><br><span class="line"></span><br></pre></td></tr></table></figure>
  You only need <strong>pg_config</strong> to compile <code>psycopg2</code>, not for its regular usage.</li>
</ul>
<p>Once everything is in place it’s just a matter of running the standard:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ pip install psycopg2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>or, from the directory containing the source code:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ python setup.py build</span><br><span class="line">$ python setup.py install</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Runtime-requirements"><a href="#Runtime-requirements" class="headerlink" title="Runtime requirements"></a>Runtime requirements</h3><p>Unless you compile <code>psycopg2</code> as a static library, or you install it from a self-contained wheel package, it will need the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.postgresql.org/docs/current/static/libpq.html">libpq</a> library at runtime (usually distributed in a <code>libpq.so</code> or <code>libpq.dll</code> file). <code>psycopg2</code> relies on the host OS to find the library if the library is installed in a standard location there is usually no problem; if the library is in a non-standard location you will have to tell Psycopg how to find it, which is OS-dependent (for instance setting a suitable <code>LD_LIBRARY_PATH</code> on Linux).</p>
<p>Note</p>
<p>The libpq header files used to compile <code>psycopg2</code> should match the version of the library linked at runtime. If you get errors about missing or mismatching libraries when importing <code>psycopg2</code> check (e.g. using <strong>ldd</strong>) if the module <code>psycopg2/_psycopg.so</code> is linked to the right <code>libpq.so</code>.</p>
<p>Note</p>
<p>Whatever version of libpq <code>psycopg2</code> is compiled with, it will be possible to connect to PostgreSQL servers of any supported version: just install the most recent libpq version or the most practical, without trying to match it to the version of the PostgreSQL server you will have to connect to.</p>
<h2 id="Non-standard-builds"><a href="#Non-standard-builds" class="headerlink" title="Non-standard builds"></a>Non-standard builds</h2><p>If you have less standard requirements such as:</p>
<ul>
<li>creating a <a href="#debug-build">debug build</a>,</li>
<li>using <strong>pg_config</strong> not in the <code>PATH</code>,</li>
</ul>
<p>then take a look at the <code>setup.cfg</code> file.</p>
<p>Some of the options available in <code>setup.cfg</code> are also available as command line arguments of the <code>build_ext</code> sub-command. For instance you can specify an alternate <strong>pg_config</strong> location using:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ python setup.py build_ext --pg-config /path/to/pg_config build</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Use <code>python setup.py build_ext --help</code> to get a list of the options supported.</p>
<h3 id="Creating-a-debug-build"><a href="#Creating-a-debug-build" class="headerlink" title="Creating a debug build"></a>Creating a debug build</h3><p>In case of problems, Psycopg can be configured to emit detailed debug messages, which can be very useful for diagnostics and to report a bug. In order to create a debug package:</p>
<ul>
<li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://pypi.org/project/psycopg2/#files">Download</a> and unpack the Psycopg <em>source package</em> (the <code>.tar.gz</code> package).</li>
<li>Edit the <code>setup.cfg</code> file adding the <code>PSYCOPG_DEBUG</code> flag to the <code>define</code> option.</li>
<li><a href="#build-prerequisites">Compile and install</a> the package.</li>
<li>Set the <code>PSYCOPG_DEBUG</code> environment variable:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ export PSYCOPG_DEBUG=1</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>Run your program (making sure that the <code>psycopg2</code> package imported is the one you just compiled and not e.g. the system one): you will have a copious stream of informations printed on stderr.</li>
</ul>
<h3 id="Non-standard-Python-Implementation"><a href="#Non-standard-Python-Implementation" class="headerlink" title="Non-standard Python Implementation"></a>Non-standard Python Implementation</h3><p>The <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/module.html#module-psycopg2" title="psycopg2"><code>psycopg2</code></a> package is the current mature implementation of the adapter: it is a C extension and as such it is only compatible with <a target="_blank" rel="noopener external nofollow noreferrer" href="https://en.wikipedia.org/wiki/CPython">CPython</a>. If you want to use Psycopg on a different Python implementation (PyPy, Jython, IronPython) there is a couple of alternative:</p>
<ul>
<li>a <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/mvantellingen/psycopg2-ctypes">Ctypes port</a>, but it is not as mature as the C implementation yet and it is not as feature-complete;</li>
<li>a <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/chtd/psycopg2cffi">CFFI port</a> which is currently more used and reported more efficient on PyPy, but please be careful of its version numbers because they are not aligned to the official psycopg2 ones and some features may differ.</li>
</ul>
<h2 id="Running-the-test-suite"><a href="#Running-the-test-suite" class="headerlink" title="Running the test suite"></a>Running the test suite</h2><p>Once <code>psycopg2</code> is installed you can run the test suite to verify it is working correctly. From the source directory, you can run:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ python -c &quot;import tests; tests.unittest.main(defaultTest=&#x27;tests.test_suite&#x27;)&quot; --verbose</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>The tests run against a database called <code>psycopg2_test</code> on UNIX socket and the standard port. You can configure a different database to run the test by setting the environment variables:</p>
<ul>
<li><code>PSYCOPG2_TESTDB</code></li>
<li><code>PSYCOPG2_TESTDB_HOST</code></li>
<li><code>PSYCOPG2_TESTDB_PORT</code></li>
<li><code>PSYCOPG2_TESTDB_USER</code></li>
</ul>
<p>The database should already exist before running the tests.</p>
<h2 id="If-you-still-have-problems"><a href="#If-you-still-have-problems" class="headerlink" title="If you still have problems"></a>If you still have problems</h2><p>Try the following. <em>In order:</em></p>
<ul>
<li>Read again the <a href="#build-prerequisites">Build prerequisites</a>.</li>
<li>Read the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/faq.html#faq-compile">FAQ</a>.</li>
<li>Google for <code>psycopg2</code> <em>your error message</em>. Especially useful the week after the release of a new OS X version.</li>
<li>Write to the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.postgresql.org/list/psycopg/">Mailing List</a>.</li>
<li>If you think that you have discovered a bug, test failure or missing feature please raise a ticket in the <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/psycopg/psycopg2/issues">bug tracker</a>.</li>
<li>Complain on your blog or on Twitter that <code>psycopg2</code> is the worst package ever and about the quality time you have wasted figuring out the correct <code>ARCHFLAGS</code>. Especially useful from the Starbucks near you.</li>
</ul>
<h3 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/index.html">Table of Contents</a></h3><ul>
<li><a href="#">Installation</a><ul>
<li><a href="#quick-install">Quick Install</a><ul>
<li><a href="#psycopg-vs-psycopg-binary">psycopg vs psycopg-binary</a></li>
<li><a href="#change-in-binary-packages-between-psycopg-2-7-and-2-8">Change in binary packages between Psycopg 2.7 and 2.8</a></li>
</ul>
</li>
<li><a href="#prerequisites">Prerequisites</a><ul>
<li><a href="#build-prerequisites">Build prerequisites</a></li>
<li><a href="#runtime-requirements">Runtime requirements</a></li>
</ul>
</li>
<li><a href="#non-standard-builds">Non-standard builds</a><ul>
<li><a href="#creating-a-debug-build">Creating a debug build</a></li>
<li><a href="#non-standard-python-implementation">Non-standard Python Implementation</a></li>
</ul>
</li>
<li><a href="#running-the-test-suite">Running the test suite</a></li>
<li><a href="#if-you-still-have-problems">If you still have problems</a></li>
</ul>
</li>
</ul>
<h3 id="Quick-search"><a href="#Quick-search" class="headerlink" title="Quick search"></a>Quick search</h3><ul>
<li><p>← <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/index.html" title="Previous document">Psycopg – PostgreSQL database adapter for Python</a></p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/usage.html" title="Next document">Basic module usage</a> →</p>
</li>
<li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.psycopg.org/docs/index.html">Home</a></p>
</li>
</ul>
<p>© 2001-2021, Federico Di Gregorio, Daniele Varrazzo, The Psycopg Team.</p>
<p><a id="fatkun-drop-panel-close-btn"></a>×</p>
<p>拖拽到此处</p>
<p>图片将完成下载</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:978252321@qq.com" rel="external nofollow noreferrer">传礼</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://iwangchuanli.github.io/posts/20855.html">https://iwangchuanli.github.io/posts/20855.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://iwangchuanli.github.io" target="_blank">传礼</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img10_lLsQAP.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/17286.html"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img19_kf59TQ.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java8 Stream 之sorted方法 排序讲解</div></div></a></div><div class="next-post pull-right"><a href="/posts/29672.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img4_DmcHVm.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">java从jar包中读取资源文件</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/14951.html" title="PyPDF2-python操作PDF"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img22_700Zcx.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-18</div><div class="title">PyPDF2-python操作PDF</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Nice to meet you ~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Psycopg-2-9-3-documentation"><span class="toc-number">1.</span> <span class="toc-text">Psycopg 2.9.3 documentation</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Installation"><span class="toc-number">2.</span> <span class="toc-text">Installation</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Quick-Install"><span class="toc-number">2.1.</span> <span class="toc-text">Quick Install</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#psycopg-vs-psycopg-binary"><span class="toc-number">2.1.1.</span> <span class="toc-text">psycopg vs psycopg-binary</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Change-in-binary-packages-between-Psycopg-2-7-and-2-8"><span class="toc-number">2.1.2.</span> <span class="toc-text">Change in binary packages between Psycopg 2.7 and 2.8</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Prerequisites"><span class="toc-number">2.2.</span> <span class="toc-text">Prerequisites</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Build-prerequisites"><span class="toc-number">2.2.1.</span> <span class="toc-text">Build prerequisites</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Runtime-requirements"><span class="toc-number">2.2.2.</span> <span class="toc-text">Runtime requirements</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Non-standard-builds"><span class="toc-number">2.3.</span> <span class="toc-text">Non-standard builds</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-a-debug-build"><span class="toc-number">2.3.1.</span> <span class="toc-text">Creating a debug build</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Non-standard-Python-Implementation"><span class="toc-number">2.3.2.</span> <span class="toc-text">Non-standard Python Implementation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Running-the-test-suite"><span class="toc-number">2.4.</span> <span class="toc-text">Running the test suite</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#If-you-still-have-problems"><span class="toc-number">2.5.</span> <span class="toc-text">If you still have problems</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Table-of-Contents"><span class="toc-number">2.5.1.</span> <span class="toc-text">Table of Contents</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Quick-search"><span class="toc-number">2.5.2.</span> <span class="toc-text">Quick search</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget ads-wrap"><a target="_blank" href="https://www.aliyun.com/activity?userCode=dpj8p3hl" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/aliyun_whuCuE.jpg" style="width:100%;height:100%;object-fit:cover;"></a></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img10_lLsQAP.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2022 By 传礼</div><div class="footer_custom_text"><p style="display:inline-flex">本网站由<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" rel="external nofollow noreferrer" target="_blank"><img style="width:60px;height:35px;" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/11/又拍云_logo5_O9kNul.png" title="又拍云"/></a>提供CDN加速/云存储服务</p><p><a style="margin-inline:5px" target="_blank" href="https://hexo.io/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a><a style="margin-inline:5px" target="_blank" href="https://butterfly.js.org/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a><a style="margin-inline:5px" target="_blank" href="https://www.jsdelivr.com/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a><a style="margin-inline:5px" target="_blank" href="https://github.com/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Github托管"></a><a style="margin-inline:5px" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'zHUfFgUbITfMSQGuSPgS2e3C-gzGzoHsz',
      appKey: 'yPXpeKX8VJxdFRPEsDaqNgEY',
      avatar: 'wavatar',
      serverURLs: 'https://zhuffgub.lc-cn-n1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true,
      master: '447d56ab3606de5490a2109d3e441219,135d837ea1033c9787dd307e59884d36'.split(','),
      friends: '5c?????bfe6rfc72a????e268ad3819c'.split(','),
      tagMeta: '博主,小伙伴,访客'.split(',')
        
    }, {"placeholder":"请输入内容～"}))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '052d9d6486112e93fa50',
      clientSecret: '6fea35bfb7a17521694a95f705683622976d2f53',
      repo: 'gitalk',
      owner: 'iwangchuanli',
      admin: ['iwangchuanli'],
      id: '2bc0dfff3b5926aca7a24d926f80ea39',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Valine' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><div class="aplayer no-destroy" data-id="7355841544" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><script async src="/js/grayscale.js"></script><script async src="//at.alicdn.com/t/font_1885008_srfhrsykmk.js"></script><script>((window.gitter = {}).chat = {}).options = {
  disableDefaultChat: true,
};
document.addEventListener('gitter-sidecar-ready', (e) => {
  const GitterChat = e.detail.Chat
  let chat

  function initGitter () {
    chat = new GitterChat({
      room: 'wangchuangli-/community',
      activationElement: '#chat_btn'
    });
  }

  initGitter()

  if (true) {
    document.addEventListener('pjax:complete', () => {
      chat.destroy()
      initGitter()
    })
  }

})</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/4496.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img6_L358Nt.jpeg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2018-09-05</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/4496.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">编程系列书单推荐</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/4496.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/35693.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/iwangchuanli/cdn@master/image/2022/04/img33_fnRUqR.jpeg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2018-11-26</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/35693.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">优秀科技博客订阅</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/35693.html&quot;);" href="javascript:void(0);" rel="external nofollow noreferrer" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>